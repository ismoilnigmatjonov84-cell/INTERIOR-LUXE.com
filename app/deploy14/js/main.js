(function(_0x23e9cb,_0x2a81ec){const _0x4743af=_0x9711,_0xffe168=_0x23e9cb();while(!![]){try{const _0x13d0be=parseInt(_0x4743af(0xd0))/0x1+parseInt(_0x4743af(0x16b))/0x2*(parseInt(_0x4743af(0x168))/0x3)+-parseInt(_0x4743af(0x17e))/0x4+-parseInt(_0x4743af(0x10a))/0x5*(parseInt(_0x4743af(0x94))/0x6)+parseInt(_0x4743af(0x191))/0x7*(parseInt(_0x4743af(0xfb))/0x8)+-parseInt(_0x4743af(0xea))/0x9+parseInt(_0x4743af(0x14a))/0xa*(parseInt(_0x4743af(0xaa))/0xb);if(_0x13d0be===_0x2a81ec)break;else _0xffe168['push'](_0xffe168['shift']());}catch(_0x4b0fdc){_0xffe168['push'](_0xffe168['shift']());}}}(_0x558e,0x7e9ff));import{show_points,setActionPanelEvents,updateZoomUI}from'./main_ui.js';import{get_svg}from'./pdfsvg.js';import{TMainStat}from'./stat.js';let bg=null;init();let main_statistic=new TMainStat();export let polyClass=createPoly();export let mesClass=createMes();function _0x9711(_0x1f17a7,_0xf7c5c4){const _0x558e46=_0x558e();return _0x9711=function(_0x971140,_0x5bdc4e){_0x971140=_0x971140-0x8a;let _0x462cc4=_0x558e46[_0x971140];return _0x462cc4;},_0x9711(_0x1f17a7,_0xf7c5c4);}export function hide_actions(){const _0x158936=_0x9711;let _0x4d62bd=$('.actions_panel\x20.length_input\x20input'),_0x459be5=$(_0x158936(0x132)),_0x429747=$(_0x158936(0x10d)),_0x4ceb6e=$('.actions_panel\x20.flip#vertical'),_0x2be6ba=$(_0x158936(0xa8)),_0x5c4d8e=$(_0x158936(0x95)),_0x459bc9=$(_0x158936(0x136)),_0x22c471=$(_0x158936(0x124));_0x4d62bd[_0x158936(0x11d)](),_0x459be5[_0x158936(0x11d)](),_0x429747['hide'](),_0x4ceb6e[_0x158936(0x11d)](),_0x2be6ba[_0x158936(0x11d)](),_0x5c4d8e[_0x158936(0x11d)](),_0x459bc9[_0x158936(0x11d)](),_0x459be5['hide'](),_0x22c471['hide'](),$('.input')[_0x158936(0x11d)]();}export function show_actions(){const _0x322f29=_0x9711;let _0x4906c0=$(_0x322f29(0xe7)),_0x182061=$(_0x322f29(0x132)),_0x54352d=$(_0x322f29(0x10d)),_0x458d84=$('.actions_panel\x20.flip#vertical'),_0x14ad33=$(_0x322f29(0xa8)),_0x4759a8=$('.actions_panel\x20.flip#rotate'),_0x338aab=$(_0x322f29(0x136)),_0x351c34=$(_0x322f29(0x124));_0x4906c0[_0x322f29(0xed)](),_0x182061['show'](),_0x54352d['show'](),_0x458d84['show'](),_0x14ad33[_0x322f29(0xed)](),_0x4759a8[_0x322f29(0xed)](),_0x338aab[_0x322f29(0xed)](),_0x182061[_0x322f29(0xed)](),_0x351c34[_0x322f29(0xed)](),$('.input')[_0x322f29(0xed)]();}export function update_floor(_0x4e295e){const _0x1dbaa1=_0x9711;let _0x3074f6=_0x3153c8=>{const _0x446b8d=_0x9711;let _0x738023=new fabric['Polygon'](_0x3153c8,{'fill':_0x446b8d(0x19a),'stroke':'#3399994d','strokeWidth':0x1,'closed':!![],'selectable':![],'hasControls':![],'uid':generateUniqueKey(),'isFloor':!![]});_0x4e295e[_0x446b8d(0x9b)]=_0x738023,pthis['canvas'][_0x446b8d(0x15d)](_0x738023),pthis[_0x446b8d(0x15f)][_0x446b8d(0xee)](_0x738023,0x1),pthis[_0x446b8d(0x15f)]['renderAll']();};!_0x4e295e[_0x1dbaa1(0x9b)]?_0x3074f6(_0x4e295e[_0x1dbaa1(0x160)]):(pthis[_0x1dbaa1(0x15f)][_0x1dbaa1(0x177)](_0x4e295e[_0x1dbaa1(0x9b)]),_0x4e295e[_0x1dbaa1(0x9b)][_0x1dbaa1(0x138)](),_0x4e295e[_0x1dbaa1(0x9b)]=null,_0x3074f6(_0x4e295e[_0x1dbaa1(0x160)]));}export function createFurniture(_0x3cb134,_0xa5589f){return new Promise(_0x5abc74=>{const _0x57da09=_0x9711;fabric[_0x57da09(0x156)](_0x3cb134,function(_0x454376,_0x338fd6){const _0x4ee85f=_0x57da09;var _0x3a9956=fabric['util'][_0x4ee85f(0xc5)](_0x454376,_0x338fd6);_0x3a9956['uid']=generateUniqueKey(),_0x3a9956[_0x4ee85f(0x1bc)]=!![],_0x3a9956['startScaleX']=_0x3a9956['scaleX'],_0x3a9956['startScaleY']=_0x3a9956[_0x4ee85f(0x18b)],_0x3a9956['isDragging']=!![],context[_0x4ee85f(0x12a)]=_0x3a9956,_0x3a9956['isFurniture']=!![],_0x3a9956['flipH']=![],_0x3a9956['flipV']=![];let _0x4d90b3=_0x3cb134[_0x4ee85f(0xd9)](_0x4ee85f(0x16e))[0x1][_0x4ee85f(0xd9)]('/');_0x3a9956[_0x4ee85f(0x127)]=_0x4d90b3[0x0],_0x3a9956[_0x4ee85f(0x102)]=_0x4d90b3[0x1][_0x4ee85f(0xd9)]('.')[0x0],$(_0x4ee85f(0x1a1))[_0x4ee85f(0x13f)]('src',_0x3cb134),_0x5abc74(_0x3a9956);},function(_0x1ccd9b,_0x15780f){const _0x2b78ee=_0x57da09;_0x15780f[_0x2b78ee(0x18a)]('id',_0x1ccd9b['getAttribute']('id'));});});}function createPoly(){const _0x2c9458=_0x9711;var _0x2bead0=fabric[_0x2c9458(0x1b0)][_0x2c9458(0x134)](fabric[_0x2c9458(0x173)],{'type':_0x2c9458(0xa5),'name':'','inner':[],'outer':[],'base':[],'rooms':[],'windows':[],'furniture':[],'area':0x0,'aabb':{'cx':0x0,'cy':0x0,'hw':0x0,'hh':0x0},'measure':{'individual':-0x1},'selected':![],'changing':![],'initialize':function(_0x22d0c2){const _0x2dce75=_0x2c9458;_0x22d0c2=_0x22d0c2||{},(this[_0x2dce75(0x10b)]=_0x2dce75(0x1ae),this['house_id']=''),this['level_id']='',this[_0x2dce75(0x123)]=[],this[_0x2dce75(0x160)]=[],this[_0x2dce75(0xec)]=[],this[_0x2dce75(0xab)]=[],this[_0x2dce75(0xe6)]=[],this['furnitures']=[],this[_0x2dce75(0x9b)]=null,this[_0x2dce75(0x112)]=0x0,this[_0x2dce75(0x12d)]={'cx':0x0,'cy':0x0,'hw':0x0,'hh':0x0},this[_0x2dce75(0xc0)]={'individual':-0x1},this['selected']=![],this[_0x2dce75(0x179)]=![],this['callSuper']('initialize',fabric[_0x2dce75(0x1b0)][_0x2dce75(0x1a2)][_0x2dce75(0x144)]({'left':0x0,'top':0x0}),_0x22d0c2);},'update_scale':function(_0x2bbefd,_0x5c2695,_0x1c56bb){const _0x24a3c4=_0x2c9458;let _0x2dc1ea=_0x58d3a7=>{const _0x2186b0=_0x9711;_0x58d3a7[_0x2186b0(0xdd)](_0x14de36=>{_0x14de36['x']=_0x14de36['x']*_0x2bbefd-_0x5c2695,_0x14de36['y']=_0x14de36['y']*_0x2bbefd-_0x1c56bb;});},_0x10b0be=_0x1e9e0f=>{const _0x4f6017=_0x9711;_0x1e9e0f[_0x4f6017(0xdd)](_0x3e762a=>{const _0x2c6c89=_0x4f6017;_0x3e762a[_0x2c6c89(0xc2)]=_0x3e762a['left']*_0x2bbefd-_0x5c2695,_0x3e762a['top']=_0x3e762a[_0x2c6c89(0x93)]*_0x2bbefd-_0x1c56bb,_0x3e762a['scaleX']*=_0x2bbefd,_0x3e762a[_0x2c6c89(0x18b)]*=_0x2bbefd,_0x3e762a[_0x2c6c89(0x109)]();}),pthis['canvas'][_0x4f6017(0xf5)]();};_0x2dc1ea(this['base']),_0x2dc1ea(this[_0x24a3c4(0x123)]),_0x2dc1ea(this[_0x24a3c4(0x160)]),_0x10b0be(this[_0x24a3c4(0x10f)]),_0x2dc1ea(this[_0x24a3c4(0xab)]),_0x2dc1ea(this[_0x24a3c4(0xe6)]),this[_0x24a3c4(0x186)](),update_floor(this);},'update_translation':function(_0x492b52,_0xca3695){const _0xf27091=_0x2c9458;let _0x469be0=_0x589039=>{_0x589039['forEach'](_0x1ae601=>{_0x1ae601['x']+=_0x492b52,_0x1ae601['y']+=_0xca3695;});},_0x4fb0c2=_0x2e04e5=>{const _0x56b0ea=_0x9711;_0x2e04e5[_0x56b0ea(0xdd)](_0x2677bb=>{const _0x476083=_0x56b0ea;_0x2677bb[_0x476083(0x93)]+=_0xca3695,_0x2677bb[_0x476083(0xc2)]+=_0x492b52,_0x2677bb[_0x476083(0x109)](),_0x2677bb[_0x476083(0xcd)]&&(canvas[_0x476083(0x177)](_0x2677bb['selectionRect']),_0x2677bb[_0x476083(0xcd)]=null,pthis[_0x476083(0x15f)][_0x476083(0xf5)]());}),pthis[_0x56b0ea(0x15f)][_0x56b0ea(0xf5)]();},_0x2fa868=_0x3ef096=>{const _0x3c9003=_0x9711;_0x3ef096[_0x3c9003(0x93)]+=_0xca3695,_0x3ef096[_0x3c9003(0xc2)]+=_0x492b52,_0x3ef096[_0x3c9003(0x109)](),pthis[_0x3c9003(0x15f)][_0x3c9003(0xf5)]();};_0x469be0(this[_0xf27091(0xec)]),_0x469be0(this[_0xf27091(0x123)]),_0x469be0(this['outer']),_0x4fb0c2(this[_0xf27091(0x10f)]),this[_0xf27091(0x9b)]&&_0x2fa868(this['floor']),_0x469be0(this[_0xf27091(0xab)]),_0x469be0(this[_0xf27091(0xe6)]),this[_0xf27091(0x186)]();},'update_area':function(){const _0x285bd6=_0x2c9458;let _0x46d793=0x0,_0x42f9a2=this['is_counterclockwise']?this[_0x285bd6(0x160)]:this[_0x285bd6(0x123)];for(let _0x21cc03=0x0,_0x29180e=_0x42f9a2[_0x285bd6(0x172)]-0x1;_0x21cc03<_0x29180e;++_0x21cc03){let _0x568602=_0x21cc03,_0x26f7b6=_0x21cc03==_0x29180e-0x1?0x0:_0x21cc03+0x1,_0x150831=_0x42f9a2[_0x568602]['x']/context[_0x285bd6(0x13b)]/CELL_SIZE*CELL_DIMENSION,_0x1a18b7=_0x42f9a2[_0x26f7b6]['y']/context[_0x285bd6(0x13b)]/CELL_SIZE*CELL_DIMENSION,_0x4613cc=_0x42f9a2[_0x26f7b6]['x']/context[_0x285bd6(0x13b)]/CELL_SIZE*CELL_DIMENSION,_0x3708dd=_0x42f9a2[_0x568602]['y']/context['zoom']/CELL_SIZE*CELL_DIMENSION;_0x46d793+=_0x150831*_0x1a18b7*0.5,_0x46d793-=_0x4613cc*_0x3708dd*0.5;}update_floor(this),this[_0x285bd6(0x112)]=Math[_0x285bd6(0xdb)](_0x46d793);},'update_aabb':function(){const _0x2cb31d=_0x2c9458;let _0x197667={'x':Number[_0x2cb31d(0xe1)],'y':Number[_0x2cb31d(0xe1)]},_0x4da99b={'x':0x0,'y':0x0};this[_0x2cb31d(0x160)][_0x2cb31d(0xdd)](_0x187cd9=>{if(_0x197667['x']>_0x187cd9['x'])_0x197667['x']=_0x187cd9['x'];if(_0x4da99b['x']<_0x187cd9['x'])_0x4da99b['x']=_0x187cd9['x'];if(_0x197667['y']>_0x187cd9['y'])_0x197667['y']=_0x187cd9['y'];if(_0x4da99b['y']<_0x187cd9['y'])_0x4da99b['y']=_0x187cd9['y'];}),this[_0x2cb31d(0x12d)]['hw']=(_0x4da99b['x']-_0x197667['x'])/0x2,this[_0x2cb31d(0x12d)]['hh']=(_0x4da99b['y']-_0x197667['y'])/0x2,this[_0x2cb31d(0x12d)]['cx']=_0x197667['x']+this['aabb']['hw'],this[_0x2cb31d(0x12d)]['cy']=_0x197667['y']+this[_0x2cb31d(0x12d)]['hh'];},'is_counterclockwise':function(){const _0x27e4=_0x2c9458;let _0x22b946=0x0;for(let _0x2049dc=0x0;_0x2049dc<this['base'][_0x27e4(0x172)];++_0x2049dc){let _0x1b83df=(_0x2049dc+0x1)%this[_0x27e4(0xec)][_0x27e4(0x172)];_0x22b946+=this['base'][_0x2049dc]['x']*this['base'][_0x1b83df]['y'],_0x22b946-=this[_0x27e4(0xec)][_0x1b83df]['x']*this[_0x27e4(0xec)][_0x2049dc]['y'];}return _0x22b946<0x0;},'draw_content'(_0x143be8){const _0x350a5e=_0x2c9458;_0x143be8[_0x350a5e(0xd8)]();let _0x422e61='';if(this[_0x350a5e(0xfc)]||this[_0x350a5e(0x1bc)])_0x422e61=_0x350a5e(0x199);else this[_0x350a5e(0x179)]?_0x422e61=_0x350a5e(0x199):_0x422e61=colors['WallNotActive'];_0x143be8[_0x350a5e(0x133)]=_0x422e61,_0x143be8[_0x350a5e(0x166)]=_0x350a5e(0x193),_0x143be8[_0x350a5e(0xe4)]=0x1,_0x143be8['beginPath'](),_0x143be8['moveTo'](this[_0x350a5e(0x160)][0x0]['x'],this[_0x350a5e(0x160)][0x0]['y']);let _0x7cfb7=!![];this['outer'][_0x350a5e(0xdd)](_0x58c6b1=>{const _0x152d45=_0x350a5e;_0x7cfb7?_0x7cfb7=![]:_0x143be8[_0x152d45(0x126)](_0x58c6b1['x'],_0x58c6b1['y']);});this[_0x350a5e(0x123)][_0x350a5e(0x172)]>0x0&&(_0x143be8[_0x350a5e(0xee)](this['inner'][0x0]['x'],this[_0x350a5e(0x123)][0x0]['y']),this[_0x350a5e(0x123)][_0x350a5e(0xdd)](_0x3a166d=>{const _0x49bd57=_0x350a5e;_0x143be8[_0x49bd57(0x126)](_0x3a166d['x'],_0x3a166d['y']);}));_0x143be8[_0x350a5e(0xc6)](),_0x143be8[_0x350a5e(0x1a3)](),_0x143be8[_0x350a5e(0xb3)]();let _0x5aa79b=WINDOW_HALF_WIDTH*context[_0x350a5e(0x13b)],_0x13c711=DOOR_HALF_WIDTH*context[_0x350a5e(0x13b)],_0x36188e=WALL_HALF_WIDTH*context[_0x350a5e(0x13b)];this['furnitures'][_0x350a5e(0xdd)]((_0x32985c,_0x5b3772)=>{const _0x5a708d=_0x350a5e;let _0x45854c=context['tool']==_0x5a708d(0x1b4);_0x32985c[_0x5a708d(0x18a)]({'left':_0x32985c['left'],'top':_0x32985c[_0x5a708d(0x93)],'hasBorders':!![],'lockMovementX':!_0x45854c,'lockMovementY':!_0x45854c,'visible':!![],'selectable':!![],'hasControls':_0x45854c});}),_0x143be8[_0x350a5e(0xc6)](),_0x143be8[_0x350a5e(0x92)](),this[_0x350a5e(0xab)]['forEach'](_0x4d3ff5=>{const _0x2cd9a4=_0x350a5e;_0x4d3ff5[_0x2cd9a4(0xe8)]&&(_0x143be8[_0x2cd9a4(0x1a3)](),_0x143be8[_0x2cd9a4(0x133)]=colors[_0x2cd9a4(0x190)],_0x143be8[_0x2cd9a4(0x92)]());let _0x1e286b={'x':Math[_0x2cd9a4(0xd3)](_0x4d3ff5['a']*degrees_to_radians),'y':Math[_0x2cd9a4(0x1a4)](_0x4d3ff5['a']*degrees_to_radians)},_0x40c108={'x':-_0x1e286b['y'],'y':_0x1e286b['x']};_0x143be8[_0x2cd9a4(0xee)](_0x4d3ff5['x']-_0x1e286b['x']*_0x5aa79b+_0x40c108['x']*_0x36188e,_0x4d3ff5['y']-_0x1e286b['y']*_0x5aa79b+_0x40c108['y']*_0x36188e),_0x143be8[_0x2cd9a4(0x126)](_0x4d3ff5['x']-_0x1e286b['x']*_0x5aa79b-_0x40c108['x']*_0x36188e,_0x4d3ff5['y']-_0x1e286b['y']*_0x5aa79b-_0x40c108['y']*_0x36188e),_0x143be8[_0x2cd9a4(0x126)](_0x4d3ff5['x']+_0x1e286b['x']*_0x5aa79b-_0x40c108['x']*_0x36188e,_0x4d3ff5['y']+_0x1e286b['y']*_0x5aa79b-_0x40c108['y']*_0x36188e),_0x143be8[_0x2cd9a4(0x126)](_0x4d3ff5['x']+_0x1e286b['x']*_0x5aa79b+_0x40c108['x']*_0x36188e,_0x4d3ff5['y']+_0x1e286b['y']*_0x5aa79b+_0x40c108['y']*_0x36188e),_0x143be8[_0x2cd9a4(0x126)](_0x4d3ff5['x']-_0x1e286b['x']*_0x5aa79b+_0x40c108['x']*_0x36188e,_0x4d3ff5['y']-_0x1e286b['y']*_0x5aa79b+_0x40c108['y']*_0x36188e),_0x4d3ff5[_0x2cd9a4(0xe8)]&&(_0x143be8[_0x2cd9a4(0x1a3)](),_0x143be8['fillStyle']=this['selected']?_0x2cd9a4(0x18e):'#cc33cc4d',_0x143be8[_0x2cd9a4(0x92)]());}),_0x143be8['fill'](),_0x143be8[_0x350a5e(0x92)](),this[_0x350a5e(0xab)][_0x350a5e(0xdd)](_0x1e2428=>{const _0x564dcc=_0x350a5e;_0x1e2428[_0x564dcc(0xe8)]&&(_0x143be8[_0x564dcc(0xb3)](),_0x143be8[_0x564dcc(0x166)]=colors[_0x564dcc(0x10c)],_0x143be8[_0x564dcc(0x92)]());let _0x4f4867={'x':Math[_0x564dcc(0xd3)](_0x1e2428['a']*degrees_to_radians),'y':Math['sin'](_0x1e2428['a']*degrees_to_radians)},_0x459e26={'x':-_0x4f4867['y'],'y':_0x4f4867['x']};_0x143be8['moveTo'](_0x1e2428['x']-_0x4f4867['x']*_0x5aa79b,_0x1e2428['y']-_0x4f4867['y']*_0x5aa79b),_0x143be8[_0x564dcc(0x126)](_0x1e2428['x']+_0x4f4867['x']*_0x5aa79b,_0x1e2428['y']+_0x4f4867['y']*_0x5aa79b),_0x143be8[_0x564dcc(0xee)](_0x1e2428['x']-_0x4f4867['x']*_0x5aa79b+_0x459e26['x']*_0x36188e,_0x1e2428['y']-_0x4f4867['y']*_0x5aa79b+_0x459e26['y']*_0x36188e),_0x143be8[_0x564dcc(0x126)](_0x1e2428['x']-_0x4f4867['x']*_0x5aa79b-_0x459e26['x']*_0x36188e,_0x1e2428['y']-_0x4f4867['y']*_0x5aa79b-_0x459e26['y']*_0x36188e),_0x143be8[_0x564dcc(0xee)](_0x1e2428['x']+_0x4f4867['x']*_0x5aa79b+_0x459e26['x']*_0x36188e,_0x1e2428['y']+_0x4f4867['y']*_0x5aa79b+_0x459e26['y']*_0x36188e),_0x143be8[_0x564dcc(0x126)](_0x1e2428['x']+_0x4f4867['x']*_0x5aa79b-_0x459e26['x']*_0x36188e,_0x1e2428['y']+_0x4f4867['y']*_0x5aa79b-_0x459e26['y']*_0x36188e),_0x1e2428[_0x564dcc(0xe8)]&&(_0x143be8[_0x564dcc(0xb3)](),_0x143be8[_0x564dcc(0x166)]='#3333334d',_0x143be8[_0x564dcc(0x92)]());}),_0x143be8['fill'](),_0x143be8[_0x350a5e(0xb3)](),_0x143be8[_0x350a5e(0x92)](),this[_0x350a5e(0xe6)]['forEach'](_0x1c328c=>{const _0x2154c9=_0x350a5e;_0x143be8['fill'](),_0x143be8[_0x2154c9(0x133)]=colors[_0x2154c9(0xc1)],_0x143be8['beginPath']();let _0x12d68e={'x':Math[_0x2154c9(0xd3)](_0x1c328c['a']*degrees_to_radians),'y':Math[_0x2154c9(0x1a4)](_0x1c328c['a']*degrees_to_radians)},_0xf273a9={'x':-_0x12d68e['y'],'y':_0x12d68e['x']};_0x143be8[_0x2154c9(0xee)](_0x1c328c['x']-_0x12d68e['x']*_0x13c711+_0xf273a9['x']*_0x36188e,_0x1c328c['y']-_0x12d68e['y']*_0x13c711+_0xf273a9['y']*_0x36188e),_0x143be8['lineTo'](_0x1c328c['x']-_0x12d68e['x']*_0x13c711-_0xf273a9['x']*_0x36188e,_0x1c328c['y']-_0x12d68e['y']*_0x13c711-_0xf273a9['y']*_0x36188e),_0x143be8[_0x2154c9(0x126)](_0x1c328c['x']+_0x12d68e['x']*_0x13c711-_0xf273a9['x']*_0x36188e,_0x1c328c['y']+_0x12d68e['y']*_0x13c711-_0xf273a9['y']*_0x36188e),_0x143be8['lineTo'](_0x1c328c['x']+_0x12d68e['x']*_0x13c711+_0xf273a9['x']*_0x36188e,_0x1c328c['y']+_0x12d68e['y']*_0x13c711+_0xf273a9['y']*_0x36188e),_0x143be8['lineTo'](_0x1c328c['x']-_0x12d68e['x']*_0x13c711+_0xf273a9['x']*_0x36188e,_0x1c328c['y']-_0x12d68e['y']*_0x13c711+_0xf273a9['y']*_0x36188e);if(_0x1c328c[_0x2154c9(0xe8)]){}}),_0x143be8[_0x350a5e(0x1a3)](),_0x143be8['stroke'](),_0x143be8[_0x350a5e(0x92)](),_0x143be8['stroke']();let _0xbbdb7=this['measure'],_0x1db257=this[_0x350a5e(0xc0)]['individual'];if(this[_0x350a5e(0x123)][_0x350a5e(0x172)]>0x0){_0x143be8[_0x350a5e(0x133)]=_0x350a5e(0x14b),_0x143be8[_0x350a5e(0x16c)]=Math[_0x350a5e(0x15b)](font_size_room_name)+_0x350a5e(0x135),_0x143be8['textBaseline']=_0x350a5e(0x16d),_0x143be8['textAlign']=_0x350a5e(0x162);let _0x3f4005=0x1e;_0x143be8[_0x350a5e(0xc4)](this[_0x350a5e(0x10b)]+'\x20'+this[_0x350a5e(0xa6)]['toString'](),this[_0x350a5e(0x12d)]['cx'],this['aabb']['cy']),_0x143be8[_0x350a5e(0xc4)](this[_0x350a5e(0x112)][_0x350a5e(0x101)](0x2)+_0x350a5e(0x1ab),this[_0x350a5e(0x12d)]['cx'],this[_0x350a5e(0x12d)]['cy']+_0x3f4005),_0x143be8[_0x350a5e(0x16c)]=Math[_0x350a5e(0x15b)](font_size_room_name)+_0x350a5e(0x135);if(this[_0x350a5e(0xaf)]){if(_0x1db257!=-0x1){let _0x46e244=_0x1db257>0x0?_0x1db257-0x1:this[_0x350a5e(0x160)][_0x350a5e(0x172)]-0x1,_0x515b98=_0x1db257+0x1<this[_0x350a5e(0x160)][_0x350a5e(0x172)]?_0x1db257+0x1:0x0;draw_measure(_0x143be8,this[_0x350a5e(0x160)][_0x1db257],this[_0x350a5e(0x160)][_0x515b98]),draw_measure(_0x143be8,this[_0x350a5e(0x160)][_0x46e244],this['outer'][_0x1db257]);}else for(let _0x5afe75=0x0;_0x5afe75<this[_0x350a5e(0x160)][_0x350a5e(0x172)]-0x1;++_0x5afe75){draw_measure(_0x143be8,this[_0x350a5e(0x160)][_0x5afe75],this['outer'][_0x5afe75+0x1]);}}else{if(_0x1db257!=-0x1){let _0x290791=_0x1db257>0x0?_0x1db257-0x1:this['inner'][_0x350a5e(0x172)]-0x1,_0x5a0c50=_0x1db257+0x1<this[_0x350a5e(0x123)][_0x350a5e(0x172)]?_0x1db257+0x1:0x0;draw_measure(_0x143be8,this[_0x350a5e(0x123)][_0x1db257],this[_0x350a5e(0x123)][_0x5a0c50]),draw_measure(_0x143be8,this[_0x350a5e(0x123)][_0x290791],this[_0x350a5e(0x123)][this[_0x350a5e(0xc0)][_0x350a5e(0xbc)]]);}else for(let _0x56d50c=0x0;_0x56d50c<this[_0x350a5e(0x123)]['length']-0x1;++_0x56d50c){draw_measure(_0x143be8,this[_0x350a5e(0x123)][_0x56d50c],this[_0x350a5e(0x123)][_0x56d50c+0x1]);}}}else{let _0x2d888b=this[_0x350a5e(0x160)],_0x36d02a=context[_0x350a5e(0x161)]==_0x350a5e(0xc2)?0x0:_0x2d888b[_0x350a5e(0x172)]/0x2,_0x3bffda=Math[_0x350a5e(0x13a)](context['side']==_0x350a5e(0xc2)?_0x2d888b['length']/0x2:_0x2d888b[_0x350a5e(0x172)]);_0x143be8[_0x350a5e(0x133)]=_0x350a5e(0x14b),_0x143be8[_0x350a5e(0x16c)]=Math[_0x350a5e(0x15b)](font_size_room_name)+_0x350a5e(0x135),_0x143be8[_0x350a5e(0x116)]='middle',_0x143be8['textAlign']=_0x350a5e(0x162);for(let _0x5e710c=_0x36d02a;_0x5e710c<_0x3bffda-0x1;++_0x5e710c){draw_measure(_0x143be8,_0x2d888b[_0x5e710c],_0x2d888b[_0x5e710c+0x1]);}}return _0x143be8[_0x350a5e(0xfd)](),_0x143be8;},'_render':function(_0x26a567){const _0x178f84=_0x2c9458;this[_0x178f84(0x1b2)](_0x178f84(0xa0),_0x26a567);if(this[_0x178f84(0x160)][_0x178f84(0x172)]<0x3)return;this[_0x178f84(0x1a9)](_0x26a567);}});return _0x2bead0;}function createMes(_0x2c4769){const _0x3498d4=_0x9711;var _0x3055b5=fabric[_0x3498d4(0x1b0)][_0x3498d4(0x134)](fabric['Object'],{'type':_0x3498d4(0xdc),'pt1':{'x':0x0,'y':0x0},'pt2':{'x':0x0,'y':0x0},'initialize':function(_0x35e19b){const _0x1ac8d3=_0x3498d4;_0x35e19b=_0x35e19b||{},this[_0x1ac8d3(0x9e)]={'x':0x0,'y':0x0},this[_0x1ac8d3(0xbe)]={'x':0x0,'y':0x0},this[_0x1ac8d3(0x1b2)]('initialize',fabric['util'][_0x1ac8d3(0x1a2)]['extend']({'left':0x0,'top':0x0}),_0x35e19b);},'update_points':function(){const _0x592374=_0x3498d4;context[_0x592374(0x184)]&&(context['rect'][_0x592374(0x109)](),context[_0x592374(0x161)]=='left'?(this[_0x592374(0x9e)]=context[_0x592374(0x184)][_0x592374(0x131)]['bl'],this[_0x592374(0xbe)]=context[_0x592374(0x184)][_0x592374(0x131)]['br']):(this['pt1']=context['rect'][_0x592374(0x131)]['tr'],this[_0x592374(0xbe)]=context[_0x592374(0x184)][_0x592374(0x131)]['tl'])),context[_0x592374(0x11a)]&&(context[_0x592374(0x11a)][_0x592374(0x109)](),context[_0x592374(0x161)]=='left'?(this['pt1']=context[_0x592374(0x11a)][_0x592374(0x131)]['bl'],this['pt2']=context[_0x592374(0x11a)][_0x592374(0x131)]['br']):(this['pt1']=context[_0x592374(0x11a)][_0x592374(0x131)]['tr'],this[_0x592374(0xbe)]=context[_0x592374(0x11a)][_0x592374(0x131)]['tl']));},'_render':function(_0xe011c8){const _0x5d65b4=_0x3498d4;this['callSuper'](_0x5d65b4(0xa0),_0xe011c8);if(get_distance(this[_0x5d65b4(0x9e)],this['pt2'])<context['stick_offset'])return;_0xe011c8[_0x5d65b4(0xd8)](),_0xe011c8['lineWidth']=0x1,_0xe011c8['font']=Math[_0x5d65b4(0x15b)](font_size_room_name)+_0x5d65b4(0x135),_0xe011c8[_0x5d65b4(0x116)]=_0x5d65b4(0x16d),_0xe011c8['textAlign']=_0x5d65b4(0x162),draw_measure(_0xe011c8,this[_0x5d65b4(0x9e)],this['pt2']),_0xe011c8[_0x5d65b4(0xfd)]();}});return _0x3055b5;}export function generate_contour(_0x3622c5){const _0x183e4c=_0x9711;let _0x3ad065=context[_0x183e4c(0xde)]['base'],_0x240978=context[_0x183e4c(0xde)][_0x183e4c(0x160)],_0x5d662f=context[_0x183e4c(0xde)][_0x183e4c(0x123)];_0x3ad065[_0x183e4c(0x172)]=0x0,_0x240978['length']=0x0,_0x5d662f['length']=0x0,context['closed_contour']=_0x3622c5,context[_0x183e4c(0x1ac)]['forEachObject'](function(_0x2dbf83){const _0x4517ed=_0x183e4c;pthis[_0x4517ed(0x15f)][_0x4517ed(0x177)](_0x2dbf83),context[_0x4517ed(0x1ac)][_0x4517ed(0x177)](_0x2dbf83);});let _0x4f531e=(context[_0x183e4c(0xa1)]===_0x183e4c(0xac)||context[_0x183e4c(0xa1)]===_0x183e4c(0x147))&&!_0x3622c5?0x1:0x0,_0x1cd1e8=context[_0x183e4c(0x198)][_0x183e4c(0x172)]-_0x4f531e,_0xf10651=0x0;for(let _0x4ad250=0x0;_0x4ad250<_0x1cd1e8;++_0x4ad250){let _0xbd1747=(_0x4ad250+0x1)%_0x1cd1e8;_0xf10651+=context[_0x183e4c(0x198)][_0x4ad250][_0x183e4c(0xc2)]*context[_0x183e4c(0x198)][_0xbd1747][_0x183e4c(0x93)],_0xf10651-=context['points'][_0xbd1747][_0x183e4c(0xc2)]*context[_0x183e4c(0x198)][_0x4ad250][_0x183e4c(0x93)];}let _0x3abc23=_0xf10651<0x0;for(let _0x1d3889=0x0;_0x1d3889<_0x1cd1e8;++_0x1d3889){let _0x4369f3=context[_0x183e4c(0x198)][_0x1d3889==0x0?_0x3622c5?_0x1cd1e8-0x1:0x0:_0x1d3889-0x1],_0x34379d=context[_0x183e4c(0x198)][_0x1d3889==_0x1cd1e8-0x1?_0x3622c5?0x0:_0x1cd1e8-0x1:_0x1d3889+0x1],_0x36be03=context[_0x183e4c(0x198)][_0x1d3889];_0x3ad065[_0x183e4c(0xf6)]({'x':_0x36be03[_0x183e4c(0xc2)],'y':_0x36be03[_0x183e4c(0x93)]});let _0x40a73d={'x':_0x4369f3['left'],'y':_0x4369f3['top']},_0x408e21={'x':_0x34379d[_0x183e4c(0xc2)],'y':_0x34379d[_0x183e4c(0x93)]},_0xd5be4b={'x':_0x36be03['left'],'y':_0x36be03[_0x183e4c(0x93)]},_0x371a4b={'x':_0x40a73d['x']-_0xd5be4b['x'],'y':_0x40a73d['y']-_0xd5be4b['y']},_0x317440={'x':_0x408e21['x']-_0xd5be4b['x'],'y':_0x408e21['y']-_0xd5be4b['y']},_0x4afa14={'x':-_0x371a4b['y'],'y':_0x371a4b['x']},_0x4597fa={'x':_0x317440['y'],'y':-_0x317440['x']};normalize(_0x4afa14),normalize(_0x4597fa),_0x4afa14['x']*=WALL_HALF_WIDTH*context[_0x183e4c(0x13b)],_0x4afa14['y']*=WALL_HALF_WIDTH*context['zoom'],_0x4597fa['x']*=WALL_HALF_WIDTH*context[_0x183e4c(0x13b)],_0x4597fa['y']*=WALL_HALF_WIDTH*context[_0x183e4c(0x13b)];let _0xd3f6e4=![];(isNaN(_0x4afa14['x'])||isNaN(_0x4afa14['y']))&&(_0x4afa14['x']=0x0,_0x4afa14['y']=0x0,_0xd3f6e4=!![]);(isNaN(_0x4597fa['x'])||isNaN(_0x4597fa['y']))&&(_0x4597fa['x']=0x0,_0x4597fa['y']=0x0,_0xd3f6e4=!![]);let _0x3dae69={'x':_0x4afa14['x']+_0x4597fa['x'],'y':_0x4afa14['y']+_0x4597fa['y']},_0x541861={'x':-_0x3dae69['x'],'y':-_0x3dae69['y']},_0x4e67cc=get_length(_0x541861),_0x10aa4e={'x':0x0,'y':0x0},_0x2cfdf0=is_line_intersects({'x':_0x4afa14['x']+_0xd5be4b['x'],'y':_0x4afa14['y']+_0xd5be4b['y']},{'x':_0x4afa14['x']+_0xd5be4b['x']-_0x371a4b['x'],'y':_0x4afa14['y']+_0xd5be4b['y']-_0x371a4b['y']},_0xd5be4b,{'x':_0x3dae69['x']+_0xd5be4b['x'],'y':_0x3dae69['y']+_0xd5be4b['y']},_0x10aa4e);_0x2cfdf0&&!_0xd3f6e4&&(_0x3dae69={'x':_0x10aa4e['x']-_0xd5be4b['x'],'y':_0x10aa4e['y']-_0xd5be4b['y']},_0x541861={'x':-_0x3dae69['x'],'y':-_0x3dae69['y']}),_0x3abc23?(_0x4e67cc<WALL_HALF_WIDTH*0.5*context[_0x183e4c(0x13b)]?(_0x5d662f[_0x183e4c(0xf6)]({'x':_0x4afa14['x']+_0xd5be4b['x'],'y':_0x4afa14['y']+_0xd5be4b['y']}),_0x5d662f[_0x183e4c(0xf6)]({'x':_0x4597fa['x']+_0xd5be4b['x'],'y':_0x4597fa['y']+_0xd5be4b['y']})):_0x5d662f[_0x183e4c(0x9f)]({'x':_0x541861['x']+_0xd5be4b['x'],'y':_0x541861['y']+_0xd5be4b['y']}),_0x240978[_0x183e4c(0xf6)]({'x':_0x3dae69['x']+_0xd5be4b['x'],'y':_0x3dae69['y']+_0xd5be4b['y']})):(_0x4e67cc<WALL_HALF_WIDTH*0.5*context[_0x183e4c(0x13b)]?(_0x240978[_0x183e4c(0xf6)]({'x':_0x4afa14['x']+_0xd5be4b['x'],'y':_0x4afa14['y']+_0xd5be4b['y']}),_0x240978[_0x183e4c(0xf6)]({'x':_0x4597fa['x']+_0xd5be4b['x'],'y':_0x4597fa['y']+_0xd5be4b['y']})):_0x240978[_0x183e4c(0xf6)]({'x':_0x3dae69['x']+_0xd5be4b['x'],'y':_0x3dae69['y']+_0xd5be4b['y']}),_0x5d662f['unshift']({'x':_0x541861['x']+_0xd5be4b['x'],'y':_0x541861['y']+_0xd5be4b['y']}));}_0x3622c5?(_0x240978[_0x183e4c(0xf6)]({'x':_0x240978[0x0]['x'],'y':_0x240978[0x0]['y']}),_0x5d662f[_0x183e4c(0x9f)]({'x':_0x5d662f[_0x5d662f['length']-0x1]['x'],'y':_0x5d662f[_0x5d662f[_0x183e4c(0x172)]-0x1]['y']}),update_floor(context),context[_0x183e4c(0xde)][_0x183e4c(0x182)](),context[_0x183e4c(0xde)][_0x183e4c(0x186)]()):(_0x240978['push'](..._0x5d662f),_0x5d662f[_0x183e4c(0x172)]=0x0);}function process_polygon(_0x304b63,_0x1b9c39,_0x3fb59a,_0x37a6ae){const _0x499ffa=_0x9711;if(context['points'][_0x499ffa(0x172)]==0x0){clone_svg(SVG[_0x499ffa(0x153)],_0x304b63,_0x1b9c39),clone_svg(SVG['Add'],_0x304b63,_0x1b9c39);let _0x39814c=findObjectAll(context['contour'],_0x499ffa(0x1bc),!![]);_0x39814c[_0x499ffa(0xdd)](_0xabd466=>{const _0x55ceb3=_0x499ffa;_0xabd466[_0x55ceb3(0xde)]['active']=![];});let _0x301cd9=findObjectAll(context[_0x499ffa(0x18f)],_0x499ffa(0xfc),!![]);_0x301cd9[_0x499ffa(0xdd)](_0x2d4915=>{const _0x56d9a2=_0x499ffa;_0x2d4915[_0x56d9a2(0xde)]['selected']=![];});}else{let _0x1a0fee=Math[_0x499ffa(0xdb)](context['points'][0x0][_0x499ffa(0xc2)]-_0x3fb59a),_0x126d19=Math[_0x499ffa(0xdb)](context[_0x499ffa(0x198)][0x0]['top']-_0x37a6ae);const _0x5e1a0f=context[_0x499ffa(0xd6)];if(_0x1a0fee<=_0x5e1a0f&&_0x126d19<=_0x5e1a0f){context[_0x499ffa(0x19c)]=!![],pthis['canvas'][_0x499ffa(0x177)](context[_0x499ffa(0x198)][_0x499ffa(0xc9)]()),generate_contour(!![]);let _0x64d584=context[_0x499ffa(0xde)];context[_0x499ffa(0xde)]=null,clean_creation(context),context[_0x499ffa(0x18f)]['push']({'poly':_0x64d584});context[_0x499ffa(0xc7)]&&(context[_0x499ffa(0xc7)][_0x499ffa(0xde)][_0x499ffa(0xfc)]=![]);context['current']=context[_0x499ffa(0x18f)][context[_0x499ffa(0x18f)][_0x499ffa(0x172)]-0x1],context[_0x499ffa(0xc7)][_0x499ffa(0xde)][_0x499ffa(0x182)](),context[_0x499ffa(0xc7)]['poly']['update_aabb'](),context[_0x499ffa(0xc7)]['poly']['clockwise']=context[_0x499ffa(0xc7)]['poly'][_0x499ffa(0x96)](),context[_0x499ffa(0xc7)]['poly']['active']=!![],context[_0x499ffa(0xc7)][_0x499ffa(0xde)][_0x499ffa(0x10e)]=generateUniqueKey(),show_points();context[_0x499ffa(0x181)]&&(pthis['canvas']['remove'](context[_0x499ffa(0x181)]),context[_0x499ffa(0x181)]=null);context[_0x499ffa(0x91)]&&(pthis[_0x499ffa(0x15f)][_0x499ffa(0x177)](context[_0x499ffa(0x91)]),context[_0x499ffa(0x91)]=null);context[_0x499ffa(0x184)]&&(pthis[_0x499ffa(0x15f)][_0x499ffa(0x177)](context[_0x499ffa(0x184)]),context[_0x499ffa(0x184)]=null);context[_0x499ffa(0xa1)]=_0x499ffa(0x1b4);context[_0x499ffa(0x141)]&&context[_0x499ffa(0x141)][_0x499ffa(0x90)]();update_floor(context[_0x499ffa(0xc7)]['poly']),$(_0x499ffa(0x1b1))[_0x499ffa(0x163)]('active'),pthis[_0x499ffa(0x15f)]['requestRenderAll'](),FirstRoomBeenLocked();return;}else{clone_svg(SVG['Start'],_0x304b63,_0x1b9c39,function(_0x1b6343){const _0x59f6f4=_0x499ffa;pthis['canvas'][_0x59f6f4(0x177)](context[_0x59f6f4(0x198)][context[_0x59f6f4(0x198)][_0x59f6f4(0x172)]-0x1]),pthis[_0x59f6f4(0x15f)][_0x59f6f4(0x15d)](_0x1b6343),context[_0x59f6f4(0x198)][context[_0x59f6f4(0x198)][_0x59f6f4(0x172)]-0x1]=_0x1b6343;});if(context['points'][_0x499ffa(0x172)]==0x2){let _0x5d8314=context[_0x499ffa(0x198)][0x0][_0x499ffa(0xc2)],_0x52ec92=context[_0x499ffa(0x198)][0x0][_0x499ffa(0x93)],_0x2483b6=context[_0x499ffa(0x198)][0x1][_0x499ffa(0xc2)],_0x504037=context[_0x499ffa(0x198)][0x1]['top'];!getVectorDirection(_0x5d8314,_0x52ec92,_0x2483b6,_0x504037)&&(context[_0x499ffa(0x161)]==_0x499ffa(0xc2)&&change_side());}context[_0x499ffa(0x198)][_0x499ffa(0x172)]>0x2&&(clone_svg(SVG[_0x499ffa(0x13e)],context[_0x499ffa(0x198)][context['points'][_0x499ffa(0x172)]-0x2][_0x499ffa(0xc2)],context[_0x499ffa(0x198)][context[_0x499ffa(0x198)][_0x499ffa(0x172)]-0x2][_0x499ffa(0x93)],function(_0x4e36f9){const _0x5ea38d=_0x499ffa;pthis[_0x5ea38d(0x15f)][_0x5ea38d(0x177)](context['points'][context[_0x5ea38d(0x198)][_0x5ea38d(0x172)]-0x2]),pthis[_0x5ea38d(0x15f)]['add'](_0x4e36f9),context[_0x5ea38d(0x198)][context[_0x5ea38d(0x198)]['length']-0x2]=_0x4e36f9;}),context[_0x499ffa(0xde)][_0x499ffa(0xa6)]=context['contour']['length']+0x1),clone_svg(SVG[_0x499ffa(0xd5)],_0x304b63,_0x1b9c39);}}polyObjects(_0x304b63,_0x1b9c39),pthis['canvas'][_0x499ffa(0xf5)]();}export function polyObjects(_0x4eb3f0,_0x3dfb60){const _0x176030=_0x9711;if(isNaN(_0x4eb3f0)||isNaN(_0x3dfb60)||!context[_0x176030(0x198)]||!context[_0x176030(0x198)][_0x176030(0x172)])return;let _0x2ed12e=[_0x4eb3f0,_0x3dfb60,_0x4eb3f0,_0x3dfb60],_0x5967e9=make_static(new fabric[(_0x176030(0xdf))](_0x2ed12e,{'strokeWidth':0x1,'stroke':colors['WindowActiveOutline'],'originX':_0x176030(0x162),'originY':_0x176030(0x162)}),!![]),_0x4bc5da=make_static(new fabric[(_0x176030(0xdf))](_0x2ed12e,{'strokeWidth':0x1,'stroke':colors[_0x176030(0x1af)],'originX':_0x176030(0x162),'originY':_0x176030(0x162)}),!![]),_0x27b943=make_static(new fabric[(_0x176030(0x1a5))]({'strokeWidth':0x2,'fill':colors['WallActiveFill'],'stroke':colors['WallActiveOutline'],'left':_0x4eb3f0,'top':_0x3dfb60,'width':0x0,'height':0x2*WALL_HALF_WIDTH*context['zoom'],'originX':'left','originY':'center','otype':_0x176030(0xac)}),!![]),_0x348850=make_static(new fabric['Rect']({'strokeWidth':0x2,'fill':colors[_0x176030(0xd2)],'stroke':colors[_0x176030(0x1af)],'left':_0x4eb3f0,'top':_0x3dfb60,'width':0x0,'height':0x2*WALL_HALF_WIDTH*context[_0x176030(0x13b)],'originX':_0x176030(0xc2),'originY':_0x176030(0x162),'visible':![],'isDoor':!![],'otype':_0x176030(0x9d)}),!![]);context[_0x176030(0x198)][_0x176030(0x172)]>0x2&&(!context[_0x176030(0xde)]&&(context[_0x176030(0xde)]=make_static(new polyClass({'stroke':_0x176030(0xf9),'strokeWidth':0x1,'fill':_0x176030(0x187),'opacity':0.3}),!![]),pthis[_0x176030(0x15f)]['add'](context[_0x176030(0xde)])),generate_contour(![]));!context[_0x176030(0x141)]&&(context[_0x176030(0x141)]=make_static(new mesClass(),!![]),pthis[_0x176030(0x15f)][_0x176030(0x15d)](context['rmes']));context[_0x176030(0x184)]&&pthis[_0x176030(0x15f)][_0x176030(0x177)](context['rect']);pthis[_0x176030(0x15f)]['add'](_0x27b943);context['rectDoor']&&pthis[_0x176030(0x15f)]['remove'](context[_0x176030(0x11a)]);pthis[_0x176030(0x15f)][_0x176030(0x15d)](_0x348850),_0x27b943[_0x176030(0xee)](pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context[_0x176030(0x198)]['length']-0x2),_0x348850[_0x176030(0xee)](pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context[_0x176030(0x198)][_0x176030(0x172)]-0x2),context['rect']=_0x27b943,context[_0x176030(0x11a)]=_0x348850,context[_0x176030(0x141)][_0x176030(0x90)](),context['rmes'][_0x176030(0xee)](pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context[_0x176030(0x198)][_0x176030(0x172)]-0x2);context[_0x176030(0x181)]&&pthis[_0x176030(0x15f)]['remove'](context[_0x176030(0x181)]);pthis[_0x176030(0x15f)][_0x176030(0x15d)](_0x5967e9);context[_0x176030(0x91)]&&pthis[_0x176030(0x15f)]['remove'](context[_0x176030(0x91)]);pthis[_0x176030(0x15f)]['add'](_0x4bc5da),_0x5967e9[_0x176030(0xee)](pthis['canvas'][_0x176030(0x139)]()-context['points'][_0x176030(0x172)]-0x2),_0x4bc5da[_0x176030(0xee)](pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context['points'][_0x176030(0x172)]-0x2),context[_0x176030(0x181)]=_0x5967e9,context[_0x176030(0x91)]=_0x4bc5da;if(!context[_0x176030(0xf4)])context[_0x176030(0xf4)]=make_static(new fabric[(_0x176030(0xdf))](_0x2ed12e,{'strokeDashArray':[0x5,0x5],'strokeWidth':0x2,'stroke':colors[_0x176030(0x122)],'visible':![]}),!![]),pthis[_0x176030(0x15f)][_0x176030(0x118)](context[_0x176030(0xf4)],pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context['points'][_0x176030(0x172)]-0x1);else pthis['canvas']['moveTo'](context[_0x176030(0xf4)],pthis[_0x176030(0x15f)]['size']()-context[_0x176030(0x198)][_0x176030(0x172)]-0x2);if(!context[_0x176030(0xd4)])context['pin_y']=make_static(new fabric[(_0x176030(0xdf))](_0x2ed12e,{'strokeDashArray':[0x5,0x5],'strokeWidth':0x2,'stroke':colors['LineMatch'],'visible':![]}),!![]),pthis[_0x176030(0x15f)][_0x176030(0x118)](context[_0x176030(0xd4)],pthis[_0x176030(0x15f)]['size']()-context[_0x176030(0x198)][_0x176030(0x172)]-0x1);else pthis['canvas'][_0x176030(0xee)](context['pin_y'],pthis[_0x176030(0x15f)][_0x176030(0x139)]()-context['points'][_0x176030(0x172)]-0x2);}function get_cell_size(){const _0x56eb44=_0x9711;let _0x5ef219=0xa,_0x397875=0x14,_0x20c3fa=0xa,_0x4f37f4=_0x397875*context[_0x56eb44(0x13b)],_0x4a8f39=0x0,_0x108795=_0x397875;if(context['zoom']>0x1){let _0x5e23f6=_0x4f37f4;while(_0x5e23f6/0xa>=_0x20c3fa){_0x5e23f6/=0xa,++_0x4a8f39;}_0x108795=_0x4f37f4/(_0x4a8f39>0x0?0xa*_0x4a8f39:0x1);}else{if(context[_0x56eb44(0x13b)]<0x1){let _0x5af4fb=_0x4f37f4;while(_0x5af4fb<_0x20c3fa){_0x5af4fb*=0xa,++_0x4a8f39;}_0x108795=_0x4f37f4*0xa**_0x4a8f39;}}return _0x108795;}function update_pins(_0x3cac19,_0x30c340,_0x3da3fa,_0x2512d){const _0xf84f8f=_0x9711;if(context[_0xf84f8f(0xf4)]&&context[_0xf84f8f(0xd4)]){let _0x3e47b7=0x0,_0x326007=null,_0x381748=0x0,_0x5cbbe8=null,_0xffdcda=context[_0xf84f8f(0xa1)]===_0xf84f8f(0xac)||context[_0xf84f8f(0xa1)]===_0xf84f8f(0x147)?0x1:0x0;for(let _0x1aa472=0x0;_0x1aa472<context[_0xf84f8f(0x198)]['length']-_0xffdcda;++_0x1aa472){let _0x46d43d=context['points'][_0x1aa472];if(!_0x46d43d)return;if(_0x46d43d==_0x2512d)continue;let _0x21e863=Math[_0xf84f8f(0xdb)](_0x46d43d[_0xf84f8f(0xc2)]-_0x3cac19),_0x18aa27=Math[_0xf84f8f(0xdb)](_0x46d43d[_0xf84f8f(0x93)]-_0x30c340);_0x21e863<=context[_0xf84f8f(0xd6)]&&(_0x326007?_0x3e47b7>_0x21e863&&(_0x3e47b7=_0x21e863,_0x326007=_0x46d43d):(_0x3e47b7=_0x21e863,_0x326007=_0x46d43d)),_0x18aa27<=context[_0xf84f8f(0xd6)]&&(_0x5cbbe8?_0x381748>_0x21e863&&(_0x381748=_0x21e863,_0x5cbbe8=_0x46d43d):(_0x381748=_0x21e863,_0x5cbbe8=_0x46d43d));}_0x326007&&(_0x3da3fa['x']=_0x326007[_0xf84f8f(0xc2)],_0x3cac19=_0x3da3fa['x']);_0x5cbbe8&&(_0x3da3fa['y']=_0x5cbbe8[_0xf84f8f(0x93)],_0x30c340=_0x3da3fa['y']);if(_0x326007)context[_0xf84f8f(0xf4)][_0xf84f8f(0x18a)]({'x1':_0x3cac19,'y1':_0x30c340,'x2':_0x326007[_0xf84f8f(0xc2)],'y2':_0x326007['top']}),context[_0xf84f8f(0xf4)][_0xf84f8f(0x12b)]=!![];else context[_0xf84f8f(0xf4)]['visible']=![];if(_0x5cbbe8)context['pin_y']['set']({'x1':_0x3cac19,'y1':_0x30c340,'x2':_0x5cbbe8['left'],'y2':_0x5cbbe8[_0xf84f8f(0x93)]}),context[_0xf84f8f(0xd4)][_0xf84f8f(0x12b)]=!![];else context['pin_y'][_0xf84f8f(0x12b)]=![];}}function check_angle(_0x29a286,_0x39d820,_0xa76f08,_0x262a98){const _0x1b6e46=_0x9711;let _0x23dfee=0x0,_0x25a27d=0x0,_0x53bbc6=function(_0x494e2c){const _0x1adfb5=_0x9711;let _0x475ec8=_0x29a286-_0x494e2c[_0x1adfb5(0xc2)],_0x2a5f3c=_0x39d820-_0x494e2c[_0x1adfb5(0x93)];_0x23dfee=Math[_0x1adfb5(0x18c)](_0x475ec8*_0x475ec8+_0x2a5f3c*_0x2a5f3c),_0x25a27d=Math[_0x1adfb5(0x178)](_0x2a5f3c,_0x475ec8)*radians_to_degrees;};if((context[_0x1b6e46(0xa1)]==='wall'||context[_0x1b6e46(0xa1)]===_0x1b6e46(0x147))&&context[_0x1b6e46(0x198)][_0x1b6e46(0x172)]>0x1){let _0x26c1da=context[_0x1b6e46(0x198)][context[_0x1b6e46(0x198)]['length']-0x2];_0x53bbc6(_0x26c1da),_0x25a27d=Math[_0x1b6e46(0x15b)](_0x25a27d/SHIFT_ANGLE)*SHIFT_ANGLE+0x5,_0xa76f08['x']=_0x23dfee*Math[_0x1b6e46(0xd3)](_0x25a27d*degrees_to_radians)+_0x26c1da[_0x1b6e46(0xc2)],_0xa76f08['y']=_0x23dfee*Math[_0x1b6e46(0x1a4)](_0x25a27d*degrees_to_radians)+_0x26c1da['top'];}else{if(_0x262a98){let _0x2a4309=context[_0x1b6e46(0x198)]['indexOf'](_0x262a98),_0x528ae6=context[_0x1b6e46(0x198)][_0x2a4309>0x0?_0x2a4309-0x1:context[_0x1b6e46(0x198)][_0x1b6e46(0x172)]-0x1];_0x53bbc6(_0x528ae6),_0x25a27d=Math[_0x1b6e46(0x15b)](_0x25a27d/SHIFT_ANGLE)*SHIFT_ANGLE+0x5,_0xa76f08['x']=_0x23dfee*Math[_0x1b6e46(0xd3)](_0x25a27d*degrees_to_radians)+_0x528ae6['left'],_0xa76f08['y']=_0x23dfee*Math[_0x1b6e46(0x1a4)](_0x25a27d*degrees_to_radians)+_0x528ae6['top'],_0x528ae6=context[_0x1b6e46(0x198)][_0x2a4309<context['points'][_0x1b6e46(0x172)]-0x1?_0x2a4309+0x1:0x0],_0x53bbc6(_0x528ae6),_0x25a27d=Math[_0x1b6e46(0x15b)](_0x25a27d/SHIFT_ANGLE)*SHIFT_ANGLE+0x5,_0xa76f08['x']=_0x23dfee*Math[_0x1b6e46(0xd3)](_0x25a27d*degrees_to_radians)+_0x528ae6[_0x1b6e46(0xc2)],_0xa76f08['y']=_0x23dfee*Math[_0x1b6e46(0x1a4)](_0x25a27d*degrees_to_radians)+_0x528ae6['top'];}}}export function isContourMouseDown(_0x25c5fb,_0x534b30){const _0x5a899b=_0x9711;let _0x56b250=![];for(let _0x40419a=0x0;_0x40419a<context[_0x5a899b(0x18f)]['length'];_0x40419a++){const _0x17e9d4=context[_0x5a899b(0x18f)][_0x40419a];let {poly:_0x1f7f11}=_0x17e9d4,_0x589d42=_0x1f7f11['is_counterclockwise'](),_0x31f694=_0x589d42?_0x1f7f11['inner']:_0x1f7f11[_0x5a899b(0x160)],_0x5cbee4=()=>{const _0x11cbaf=_0x5a899b;let _0x3ac2c1=findObj(context['contour'],_0x11cbaf(0x1bc),!![]);_0x3ac2c1&&(_0x3ac2c1[_0x11cbaf(0xde)]['active']=![],_0x3ac2c1[_0x11cbaf(0xde)][_0x11cbaf(0xfc)]=![],context[_0x11cbaf(0x198)][_0x11cbaf(0xdd)](_0x7a12bd=>pthis[_0x11cbaf(0x15f)][_0x11cbaf(0x177)](_0x7a12bd)),context[_0x11cbaf(0x198)]=[],context[_0x11cbaf(0xc7)]=null,pthis[_0x11cbaf(0x15f)]['requestRenderAll']());};if(isPointInsidePolygon(_0x25c5fb,_0x534b30,_0x31f694)){_0x56b250=!![],_0x5cbee4(),context[_0x5a899b(0xc7)]=_0x17e9d4,context['selected']=!![],canvas[_0x5a899b(0x169)](context[_0x5a899b(0xc7)][_0x5a899b(0xde)]);context['pin_x']&&canvas[_0x5a899b(0x169)](context[_0x5a899b(0xf4)]);context[_0x5a899b(0xf4)]&&canvas[_0x5a899b(0x169)](context[_0x5a899b(0xd4)]);context[_0x5a899b(0xc7)][_0x5a899b(0xde)]['active']=!![],context[_0x5a899b(0xc7)][_0x5a899b(0xde)][_0x5a899b(0xfc)]=![],show_points(),pthis[_0x5a899b(0x15f)][_0x5a899b(0xf5)]();for(let _0x2e7fa8=0x0;_0x2e7fa8<_0x17e9d4['poly'][_0x5a899b(0x10f)]['length'];_0x2e7fa8++){const _0x8d03ad=_0x17e9d4[_0x5a899b(0xde)][_0x5a899b(0x10f)][_0x2e7fa8];if(isPointInsidePolygon(_0x25c5fb,_0x534b30,_0x8d03ad['contour'])){_0x8d03ad[_0x5a899b(0x117)]=!![],context['selectedFurniture']=_0x8d03ad,show_actions(),canvas[_0x5a899b(0x177)](_0x8d03ad[_0x5a899b(0xcd)]),$('.active_item_icon\x20img')[_0x5a899b(0x13f)](_0x5a899b(0x130),_0x8d03ad[_0x5a899b(0x137)]);let _0x587f68=_0x8d03ad[_0x5a899b(0x137)]['split'](_0x5a899b(0x16e))[0x1][_0x5a899b(0xd9)]('/');context['active_cat']=_0x587f68[0x0],context['furniture_type']=_0x587f68[0x1][_0x5a899b(0xd9)]('.')[0x0],_0x8d03ad[_0x5a899b(0x17b)]=![],_0x8d03ad[_0x5a899b(0x11b)]=![],canvas[_0x5a899b(0x169)](_0x8d03ad),pthis['canvas'][_0x5a899b(0xf5)](),setActionPanelEvents();break;}}}}if(!_0x56b250){let _0xd2f1df=findObj(context['contour'],_0x5a899b(0x1bc),!![]);_0xd2f1df&&!_0xd2f1df[_0x5a899b(0x195)]&&!_0xd2f1df[_0x5a899b(0x1a0)]&&(_0xd2f1df[_0x5a899b(0xde)][_0x5a899b(0x1bc)]=![],_0xd2f1df[_0x5a899b(0xde)][_0x5a899b(0xfc)]=![],context[_0x5a899b(0x198)][_0x5a899b(0xdd)](_0x417383=>pthis[_0x5a899b(0x15f)][_0x5a899b(0x177)](_0x417383)),context['points']=[],context['current']=null,pthis[_0x5a899b(0x15f)]['requestRenderAll'](),$(_0x5a899b(0x12e))[_0x5a899b(0x163)](_0x5a899b(0xed)));}}export function isContourMouseMove(_0x2ed53d,_0x5793dc){const _0x29b885=_0x9711;let _0x152afb,_0x505b21=_0x51a9e3=>{const _0x4645b7=_0x9711;_0x51a9e3[_0x4645b7(0xfc)]=![],pthis[_0x4645b7(0x15f)][_0x4645b7(0xf5)]();};for(let _0xc84ee8=0x0;_0xc84ee8<context[_0x29b885(0x18f)][_0x29b885(0x172)];_0xc84ee8++){const _0x1b0096=context[_0x29b885(0x18f)][_0xc84ee8];let {poly:_0x43321d}=_0x1b0096,_0x39cf35=_0x43321d['is_counterclockwise'](),_0x438cd8=_0x39cf35?_0x43321d[_0x29b885(0x123)]:_0x43321d[_0x29b885(0x160)];if(isPointInsidePolygon(_0x2ed53d,_0x5793dc,_0x438cd8)){context[_0x29b885(0xc7)]&&!context[_0x29b885(0xc7)]['poly']['active']&&(context[_0x29b885(0xc7)][_0x29b885(0xde)][_0x29b885(0xfc)]=![],context[_0x29b885(0xc7)]=null);context['current']=_0x1b0096,_0x43321d['selected']=!![],context[_0x29b885(0xfc)]=!![],_0x152afb=!![];for(let _0x1cb4e5=0x0;_0x1cb4e5<_0x1b0096[_0x29b885(0xde)]['furnitures'][_0x29b885(0x172)];_0x1cb4e5++){const _0x1d5382=_0x1b0096['poly'][_0x29b885(0x10f)][_0x1cb4e5];let {width:_0x414405,height:_0x3bf9ef,scaleX:_0x59e67c,scaleY:_0x60c41d}=_0x1d5382;var _0x2d3319=_0x1d5382['getCoords']();_0x1d5382[_0x29b885(0x18f)]=_0x2d3319;if(isPointInsidePolygon(_0x2ed53d,_0x5793dc,_0x2d3319)&&!context['mouseDown']){if(!_0x1d5382[_0x29b885(0xcd)]){let _0x5dc20d=canvas['getActiveObject']();if(!_0x5dc20d||_0x5dc20d&&_0x5dc20d[_0x29b885(0x10e)]!==_0x1d5382['uid']){let _0x457838=new fabric[(_0x29b885(0xf3))](_0x2d3319,{'left':0x0,'top':0x0,'stroke':_0x29b885(0x146),'strokeWidth':0x1,'selection':![],'selectable':![],'hasControls':![],'fill':''});var _0x16d168=_0x1d5382['oCoords']['mt']['x'],_0x38cf62=_0x1d5382[_0x29b885(0x171)]['mt']['y'],_0x4c88dd=_0x1d5382['oCoords']['mb']['x'],_0x430ee9=_0x1d5382['oCoords']['mb']['y'],_0x949a4e=(_0x16d168+_0x4c88dd)/0x2,_0x3878fa=(_0x38cf62+_0x430ee9)/0x2;_0x457838[_0x29b885(0x18a)]({'left':_0x949a4e-_0x414405*_0x59e67c/0x2,'top':_0x3878fa-_0x3bf9ef*_0x60c41d/0x2,'width':_0x414405*_0x59e67c,'height':_0x3bf9ef*_0x60c41d}),_0x457838[_0x29b885(0x109)](),_0x1d5382[_0x29b885(0xcd)]=_0x457838,canvas['add'](_0x457838),_0x457838['moveTo'](0x2),canvas['renderAll']();}}}else canvas['remove'](_0x1d5382[_0x29b885(0xcd)]),_0x1d5382[_0x29b885(0xcd)]=null;canvas['requestRenderAll']();}pthis['canvas'][_0x29b885(0xf5)]();}}!_0x152afb&&findObj(context[_0x29b885(0x18f)],_0x29b885(0xfc),!![])&&_0x505b21(findObj(context['contour'],_0x29b885(0xfc),!![])[_0x29b885(0xde)]);}function setSvg(_0x378fec){const _0x48dfd5=_0x9711;let _0x4d9462=Math[_0x48dfd5(0x13a)](_0x378fec[_0x48dfd5(0xda)]),_0x2f6a9d=Math[_0x48dfd5(0x13a)](_0x378fec[_0x48dfd5(0x11c)]*_0x378fec[_0x48dfd5(0x18b)]),_0x3bc476=Math[_0x48dfd5(0x13a)](_0x378fec[_0x48dfd5(0x1b9)]*_0x378fec['scaleX']);$(_0x48dfd5(0x10d))[_0x48dfd5(0x12c)](_0x4d9462),$(_0x48dfd5(0x132))[_0x48dfd5(0x12c)](_0x3bc476),$(_0x48dfd5(0xe7))[_0x48dfd5(0x12c)](_0x2f6a9d),_0x378fec[_0x48dfd5(0x117)]=!![],context[_0x48dfd5(0x12a)]=_0x378fec,show_actions(),canvas[_0x48dfd5(0x177)](_0x378fec[_0x48dfd5(0xcd)]),$(_0x48dfd5(0x1a1))['attr']('src',_0x378fec[_0x48dfd5(0x137)]);let _0x21bcdd=_0x378fec[_0x48dfd5(0x137)][_0x48dfd5(0xd9)](_0x48dfd5(0x16e))[0x1][_0x48dfd5(0xd9)]('/');context[_0x48dfd5(0x127)]=_0x21bcdd[0x0],context[_0x48dfd5(0x102)]=_0x21bcdd[0x1][_0x48dfd5(0xd9)]('.')[0x0],_0x378fec[_0x48dfd5(0x17b)]=![],_0x378fec[_0x48dfd5(0x11b)]=![],canvas[_0x48dfd5(0x169)](_0x378fec),setActionPanelEvents(),pthis[_0x48dfd5(0x15f)]['renderAll']();}export function init(){const _0x54c208=_0x9711;pthis['canvas']=new fabric['Canvas']('canvas',{'selection':![],'preserveObjectStacking':!![],'fireRightClick':!![],'stopContextMenu':!![]});function _0xb82b72(){const _0x28898e=_0x9711;canvas[_0x28898e(0xf7)](window[_0x28898e(0x11e)]-$('.filling_content_panel')['width']()),canvas[_0x28898e(0xb5)](window[_0x28898e(0xe0)]-$(_0x28898e(0x152))['height']()-$(_0x28898e(0x1a6))[_0x28898e(0x99)]()),canvas['renderAll']();}_0xb82b72(),window[_0x54c208(0x157)](_0x54c208(0xfe),()=>{_0xb82b72();});let _0x29f9d2=[];context['group']=make_static(new fabric['Group'](_0x29f9d2,{})),pthis['canvas'][_0x54c208(0x15d)](context[_0x54c208(0x196)]),pthis[_0x54c208(0x15f)]['hoverCursor']=_0x54c208(0x1bb),context[_0x54c208(0x1ac)]=make_static(new fabric[(_0x54c208(0x1ba))]([],{})),pthis[_0x54c208(0x15f)][_0x54c208(0x15d)](context[_0x54c208(0x1ac)]),update_translation();const _0x28cd14=[_0x54c208(0x111),_0x54c208(0xca),_0x54c208(0x15c),'point_highlight',_0x54c208(0x106)];_0x28cd14['forEach'](_0x2576e4=>{const _0x1ab818=_0x54c208;let _0x23da99=context[_0x1ab818(0x197)][_0x1ab818(0x172)];context[_0x1ab818(0x197)]['push'](null),spawn_svg('svg/'+_0x2576e4+_0x1ab818(0xf2))[_0x1ab818(0x19f)](_0x13d7a9=>{context['svg'][_0x23da99]=_0x13d7a9;})[_0x1ab818(0x11f)](_0x48187c=>{});}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x175),function(_0x548521){const _0xbbeb1b=_0x54c208;let _0x27de39=_0x548521[_0xbbeb1b(0xb4)],_0x57f004=Math[_0xbbeb1b(0x13a)](_0x27de39[_0xbbeb1b(0xda)]);$(_0xbbeb1b(0x10d))['val'](_0x57f004),_0x27de39[_0xbbeb1b(0x1a0)]=!![];}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x8e),function(_0x4c85b8){const _0x489801=_0x54c208;let _0x501726=_0x4c85b8['target'],_0x14415a=Math['ceil'](_0x501726[_0x489801(0x11c)]*_0x501726[_0x489801(0x18b)]),_0x4435a6=Math[_0x489801(0x13a)](_0x501726[_0x489801(0x1b9)]*_0x501726[_0x489801(0x110)]);$(_0x489801(0x132))[_0x489801(0x12c)](_0x4435a6),$(_0x489801(0xe7))['val'](_0x14415a),_0x501726[_0x489801(0x1a0)]=!![];}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x183),function(_0x49797b){const _0x8112d=_0x54c208;let _0x2e8e0d=_0x49797b[_0x8112d(0xb4)];if(!_0x2e8e0d[_0x8112d(0x102)])return;_0x2e8e0d[_0x8112d(0x121)]=_0x2e8e0d['scaleY'],_0x2e8e0d[_0x8112d(0x97)]=_0x2e8e0d[_0x8112d(0x110)];let _0x276343=Math[_0x8112d(0x13a)](_0x2e8e0d['angle']),_0x31b410=Math[_0x8112d(0x13a)](_0x2e8e0d[_0x8112d(0x99)]*_0x2e8e0d[_0x8112d(0x121)]),_0x374f9c=Math['ceil'](_0x2e8e0d[_0x8112d(0x103)]*_0x2e8e0d[_0x8112d(0x97)]);_0x2e8e0d[_0x8112d(0x12f)]=_0x2e8e0d['left'],_0x2e8e0d[_0x8112d(0x13c)]=_0x2e8e0d[_0x8112d(0x93)],_0x2e8e0d[_0x8112d(0x11c)]=_0x31b410,_0x2e8e0d[_0x8112d(0x1b9)]=_0x374f9c,_0x2e8e0d[_0x8112d(0xb0)]=_0x2e8e0d[_0x8112d(0xc2)],_0x2e8e0d['startPosY']=_0x2e8e0d[_0x8112d(0x93)],_0x2e8e0d['originX']=_0x8112d(0x162),_0x2e8e0d[_0x8112d(0x8f)]=_0x8112d(0x162),$('.actions_panel\x20.angle_input\x20input')[_0x8112d(0x12c)](_0x276343),$(_0x8112d(0x132))[_0x8112d(0x12c)](_0x374f9c),$('.actions_panel\x20.length_input\x20input')['val'](_0x31b410),canvas['setActiveObject'](_0x2e8e0d),setActionPanelEvents(),_0x2e8e0d[_0x8112d(0x1a0)]=![];}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x105),function(_0x3ab2bf){let _0x565d0c=_0x3ab2bf['selected'][0x0];setSvg(_0x565d0c);}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x158),function(_0x5ce765){const _0x3be04e=_0x54c208;let _0xb2bdf8=_0x5ce765[_0x3be04e(0xfc)][0x0];setSvg(_0xb2bdf8);}),pthis[_0x54c208(0x15f)]['on']('selection:cleared',function(){const _0x2d9dab=_0x54c208;$('.actions_panel.show')[_0x2d9dab(0x163)](_0x2d9dab(0xed)),context[_0x2d9dab(0x12a)]=null,$(_0x2d9dab(0x10d))[_0x2d9dab(0x12c)](0x0),$(_0x2d9dab(0x132))[_0x2d9dab(0x12c)](0x0),$(_0x2d9dab(0xe7))['val'](0x0);}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0x18d),function(_0x5ee799){const _0x35ae7f=_0x54c208;let _0x509be8=_0x5ee799[_0x35ae7f(0xb4)];if(!_0x509be8[_0x35ae7f(0x102)])return;_0x509be8[_0x35ae7f(0x1a0)]=![],$(_0x35ae7f(0xef))[_0x35ae7f(0x159)](_0x35ae7f(0xed));}),pthis['canvas']['on'](_0x54c208(0x1a8),function(_0x3dde05){const _0x31245c=_0x54c208;let _0x2cf8d1=_0x3dde05[_0x31245c(0xb4)];if(!_0x2cf8d1[_0x31245c(0x102)])return;_0x2cf8d1[_0x31245c(0x195)]=![];}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0xb7),function(_0x269548){const _0x45a903=_0x54c208;let _0x3d3fc7=_0x269548[_0x45a903(0xb4)];if(!_0x3d3fc7[_0x45a903(0x102)])return;_0x3d3fc7['mouseOver']=!![];}),pthis[_0x54c208(0x15f)]['on']('mouse:wheel',function(_0x506b82){const _0x120696=_0x54c208;let _0x25e2c7=_0x506b82['e'],_0x4422e7=_0x25e2c7[_0x120696(0x145)],_0x5dc842=context[_0x120696(0x13b)];context['zoom']*=0.999**_0x4422e7;if(context['zoom']>MAX_SCALE)context[_0x120696(0x13b)]=MAX_SCALE;if(context[_0x120696(0x13b)]<MIN_SCALE)context[_0x120696(0x13b)]=MIN_SCALE;update_scale();let _0x21f086=context[_0x120696(0x13b)]/_0x5dc842;context[_0x120696(0x17d)]['x']+=Math[_0x120696(0xe2)]((_0x25e2c7['offsetX']-context[_0x120696(0x17d)]['x'])*(0x1-_0x21f086)),context[_0x120696(0x17d)]['y']+=Math[_0x120696(0xe2)]((_0x25e2c7[_0x120696(0xa2)]-context[_0x120696(0x17d)]['y'])*(0x1-_0x21f086)),update_translation(),pthis[_0x120696(0x15f)][_0x120696(0x13d)](),_0x25e2c7[_0x120696(0xce)](),_0x25e2c7['stopPropagation'](),updateZoomUI();}),pthis['canvas']['on'](_0x54c208(0xff),function(_0x20f3a3){const _0x2e06b6=_0x54c208;let _0xd92610=_0x20f3a3['e'],_0x1cf209=_0xd92610['clientX']-$(_0x2e06b6(0x170))[_0x2e06b6(0x103)](),_0xa4799c=_0xd92610['clientY']-$(_0x2e06b6(0x152))[_0x2e06b6(0x99)]();context['mouseDown']=!![];if(_0xd92610['button']===0x2||_0xd92610[_0x2e06b6(0x167)]===!![]||context[_0x2e06b6(0xa1)]===_0x2e06b6(0xcb)){this[_0x2e06b6(0x117)]=!![],this[_0x2e06b6(0x155)]=_0x1cf209,this['lastPosY']=_0xa4799c,pthis[_0x2e06b6(0x15f)]['renderAll']();return;}else{if(context[_0x2e06b6(0xa1)]===_0x2e06b6(0xac)){let _0x415f71=_0x1cf209,_0xe63590=_0xa4799c,_0x5d4466=context['points'][_0x2e06b6(0x172)];_0x5d4466>0x0&&(_0x415f71=context[_0x2e06b6(0x198)][_0x5d4466-0x1]['left'],_0xe63590=context[_0x2e06b6(0x198)][_0x5d4466-0x1][_0x2e06b6(0x93)]),process_polygon(_0x415f71,_0xe63590,_0x1cf209,_0xa4799c);}else{if(context[_0x2e06b6(0xa1)]==_0x2e06b6(0x1b4)){if(context[_0x2e06b6(0xc7)]){let {base:_0x318059}=context[_0x2e06b6(0xc7)][_0x2e06b6(0xde)];for(let _0x1c1094=0x0;_0x1c1094<_0x318059[_0x2e06b6(0x172)];_0x1c1094++){let _0x3712cd=_0x318059[_0x1c1094],_0x4c0a4a=_0x3712cd['x'],_0x1f59a0=_0x3712cd['y'],_0xd9f6ca=context['radius']*1.5;Math['abs'](_0x4c0a4a-_0x1cf209)<=_0xd9f6ca&&Math[_0x2e06b6(0xdb)](_0x1f59a0-_0xa4799c)<=_0xd9f6ca&&(this[_0x2e06b6(0x189)]=!![],this[_0x2e06b6(0x114)]=_0x1c1094,this['lastPosX']=_0x1cf209,this['lastPosY']=_0xa4799c,context[_0x2e06b6(0xc7)][_0x2e06b6(0xde)][_0x2e06b6(0x179)]=!![],clone_svg(SVG['Highlight'],_0x3712cd['x'],_0x3712cd['y'],function(_0x11d2a7){const _0x24c238=_0x2e06b6;let _0xc73c3b=pthis[_0x24c238(0x15f)][_0x24c238(0xcc)]['indexOf'](context[_0x24c238(0x198)][_0x1c1094]);pthis['canvas'][_0x24c238(0x177)](context[_0x24c238(0x198)][_0x1c1094]),pthis['canvas']['insertAt'](_0x11d2a7,_0xc73c3b),context[_0x24c238(0x198)][_0x1c1094]=_0x11d2a7;}));}let _0xdc0f09=![];context[_0x2e06b6(0xc7)][_0x2e06b6(0xde)][_0x2e06b6(0xab)]['forEach']((_0x38dfc6,_0x59f83e)=>{const _0x21f70e=_0x2e06b6;if(_0x38dfc6[_0x21f70e(0xe8)]){_0xdc0f09=!![],$('.actions_panel')['addClass'](_0x21f70e(0xed)),hide_actions(),$(_0x21f70e(0x1a1))[_0x21f70e(0x13f)](_0x21f70e(0x130),_0x21f70e(0x142)),$(_0x21f70e(0x17c))['attr'](_0x21f70e(0x129),_0x59f83e),$('.actions_panel\x20.action#del')['off'](_0x21f70e(0xad)),$(_0x21f70e(0x17c))[_0x21f70e(0x9a)](_0x21f70e(0xad),function(){const _0x55745f=_0x21f70e;let _0x48d144=findObj(context[_0x55745f(0x18f)],_0x55745f(0x1bc),!![]);_0x48d144[_0x55745f(0xde)][_0x55745f(0xab)]['splice']($(this)[_0x55745f(0x13f)]('data-del-window'),0x1),pthis[_0x55745f(0x15f)][_0x55745f(0xf5)](),$('.actions_panel')[_0x55745f(0x163)](_0x55745f(0xed));});if(_0xd92610[_0x21f70e(0xb9)]===!![]){let _0x2fde3d=findObj(context[_0x21f70e(0x18f)],_0x21f70e(0x1bc),!![]);_0x2fde3d['poly'][_0x21f70e(0xab)][_0x21f70e(0x1b5)](_0x59f83e,0x1),pthis[_0x21f70e(0x15f)][_0x21f70e(0xf5)]();}else this[_0x21f70e(0x164)]=!![],this[_0x21f70e(0x114)]=_0x59f83e,this[_0x21f70e(0x155)]=_0x1cf209,this[_0x21f70e(0xf0)]=_0xa4799c;}});let _0x629e49=![];context[_0x2e06b6(0xc7)][_0x2e06b6(0xde)][_0x2e06b6(0xe6)][_0x2e06b6(0xdd)]((_0x335900,_0x319943)=>{const _0x5c5a62=_0x2e06b6;_0x335900['focused']&&($(_0x5c5a62(0xef))['addClass'](_0x5c5a62(0xed)),_0x629e49=!![],hide_actions(),$(_0x5c5a62(0x17c))[_0x5c5a62(0x13f)]('data-del-door',_0x319943),$('.actions_panel\x20.action#del')['off'](_0x5c5a62(0xad)),$(_0x5c5a62(0x1a1))[_0x5c5a62(0x13f)]('src','./files/img/interface/door_preview.png'),$(_0x5c5a62(0x17c))[_0x5c5a62(0x9a)](_0x5c5a62(0xad),function(){const _0x433461=_0x5c5a62;let _0x5e5644=findObj(context[_0x433461(0x18f)],'active',!![]);_0x5e5644['poly'][_0x433461(0xe6)]['splice']($(this)[_0x433461(0x13f)](_0x433461(0x98)),0x1),pthis[_0x433461(0x15f)][_0x433461(0xf5)](),$('.actions_panel')['removeClass'](_0x433461(0xed));}),_0xd92610['ctrlKey']===!![]?(context[_0x5c5a62(0xc7)][_0x5c5a62(0xde)][_0x5c5a62(0xe6)][_0x5c5a62(0x1b5)](_0x319943,0x1),pthis[_0x5c5a62(0x15f)]['requestRenderAll']()):(this['isDoorDragging']=!![],this[_0x5c5a62(0x114)]=_0x319943,this[_0x5c5a62(0x155)]=_0x1cf209,this[_0x5c5a62(0xf0)]=_0xa4799c));}),!_0x629e49&&!_0xdc0f09&&!canvas[_0x2e06b6(0xbd)]()&&$(_0x2e06b6(0x12e))[_0x2e06b6(0x163)](_0x2e06b6(0xed)),isContourMouseDown(_0x1cf209,_0xa4799c);}}}}}),pthis[_0x54c208(0x15f)]['on']('mouse:move',function(_0x3f789b){const _0x66888=_0x54c208;let _0x55660a=_0x3f789b['e'];context[_0x66888(0x8a)]=!![];let _0x5390b1=_0x55660a[_0x66888(0xb2)]-$('.filling_content_panel')['width'](),_0x38b043=_0x55660a[_0x66888(0xbf)]-$(_0x66888(0x152))[_0x66888(0x99)](),_0x1410a0=context[_0x66888(0xc7)]?.[_0x66888(0xde)][_0x66888(0xec)],_0xcea814=context[_0x66888(0xc7)]?.['poly'][_0x66888(0xe6)],_0x2a4d8c=context[_0x66888(0xc7)]?.['poly']['windows'],_0x40c9e8=this['dragIndex'];context[_0x66888(0x104)][_0x66888(0xc7)]['x']=_0x5390b1,context[_0x66888(0x104)][_0x66888(0xc7)]['y']=_0x38b043;context['tool']==_0x66888(0x1b4)&&(!this[_0x66888(0x189)]&&isContourMouseMove(_0x5390b1,_0x38b043));if(this['isDragging']){context[_0x66888(0x17d)]['x']+=_0x5390b1-this[_0x66888(0x155)],context['origin']['y']+=_0x38b043-this[_0x66888(0xf0)];let {zoom:_0x2cd8b2,origin:_0x3d07c4,boundaries:_0x3259f1}=context,{top:_0x113cd0,left:_0x2feaab,bottom:_0x5c16c4,right:_0x451fdd}=_0x3259f1;_0x2feaab!=0x0&&_0x3d07c4['x']<_0x2feaab*_0x2cd8b2&&(context[_0x66888(0x17d)]['x']=_0x2feaab*_0x2cd8b2),_0x113cd0!=0x0&&_0x3d07c4['y']<_0x113cd0*_0x2cd8b2&&(context[_0x66888(0x17d)]['y']=_0x113cd0*context[_0x66888(0x13b)]),_0x451fdd!=0x0&&_0x3d07c4['x']>_0x451fdd*_0x2cd8b2&&(context[_0x66888(0x17d)]['x']=_0x451fdd*_0x2cd8b2),_0x5c16c4!=0x0&&_0x3d07c4['y']>_0x5c16c4*_0x2cd8b2&&(context['origin']['y']=_0x5c16c4*_0x2cd8b2),update_translation(),this[_0x66888(0xf5)](),this[_0x66888(0x155)]=_0x5390b1,this[_0x66888(0xf0)]=_0x38b043;}else{if(this[_0x66888(0x189)]){if(_0x55660a[_0x66888(0xb9)]===!![]){let _0x366a3a=get_cell_size(),_0x73ab5=function(_0x184ae0,_0xb2609){return Math['round'](_0x184ae0/_0xb2609)*_0xb2609;},_0x4c0b86=_0x73ab5(_0x5390b1-context['origin']['x'],_0x366a3a)+context[_0x66888(0x17d)]['x'],_0x598788=_0x73ab5(_0x38b043-context['origin']['y'],_0x366a3a)+context[_0x66888(0x17d)]['y'];_0x5390b1=_0x4c0b86,_0x38b043=_0x598788,context['pin_x'][_0x66888(0x12b)]=![],context[_0x66888(0xd4)][_0x66888(0x12b)]=![];}else{let _0x4b1c88={};update_pins(_0x5390b1,_0x38b043,_0x4b1c88,context[_0x66888(0x198)][_0x40c9e8]);if(_0x4b1c88['x'])_0x5390b1=_0x4b1c88['x'];if(_0x4b1c88['y'])_0x38b043=_0x4b1c88['y'];if(_0x55660a[_0x66888(0x151)]===!![]){_0x4b1c88={},check_angle(_0x5390b1,_0x38b043,_0x4b1c88,context[_0x66888(0x198)][_0x40c9e8]);if(_0x4b1c88['x'])_0x5390b1=_0x4b1c88['x'];if(_0x4b1c88['y'])_0x38b043=_0x4b1c88['y'];}}let _0x2e8eb1=context[_0x66888(0xc7)][_0x66888(0xde)]['base'],_0x35229a=_0x15fe28=>{if(_0x15fe28['i']==_0x40c9e8||_0x15fe28['j']==_0x40c9e8){let _0x3516de=get_distance(_0x2e8eb1[_0x40c9e8],_0x15fe28),_0x1affe2=_0x2e8eb1[_0x15fe28['i']==_0x40c9e8?_0x15fe28['j']:_0x15fe28['i']],_0x2a69e3={'x':_0x1affe2['x']-_0x5390b1,'y':_0x1affe2['y']-_0x38b043};_0x15fe28['a']=Math['atan2'](_0x2a69e3['y'],_0x2a69e3['x'])*radians_to_degrees,normalize(_0x2a69e3),_0x15fe28['x']=_0x5390b1+_0x2a69e3['x']*_0x3516de,_0x15fe28['y']=_0x38b043+_0x2a69e3['y']*_0x3516de;}};context[_0x66888(0xc7)]['poly'][_0x66888(0xab)][_0x66888(0xdd)](_0xc7c43b=>{_0x35229a(_0xc7c43b);}),context['current']['poly'][_0x66888(0xe6)][_0x66888(0xdd)](_0x2a6dde=>{_0x35229a(_0x2a6dde);}),context[_0x66888(0x198)][this[_0x66888(0x114)]]['left']=_0x5390b1,context[_0x66888(0x198)][this[_0x66888(0x114)]][_0x66888(0x93)]=_0x38b043,context[_0x66888(0x198)][this[_0x66888(0x114)]][_0x66888(0x109)](),context[_0x66888(0xde)]=context[_0x66888(0xc7)][_0x66888(0xde)];let _0x10c66c=context[_0x66888(0xf4)],_0x3d6ea2=context[_0x66888(0xd4)];context[_0x66888(0xf4)]=null,context[_0x66888(0xd4)]=null,generate_contour(!![]),context['poly']=null,context[_0x66888(0xf4)]=_0x10c66c,context[_0x66888(0xd4)]=_0x3d6ea2,this[_0x66888(0xf5)](),this[_0x66888(0x155)]=_0x5390b1,this[_0x66888(0xf0)]=_0x38b043;}else{if(this[_0x66888(0xa4)]){let _0x19f8b9=_0xcea814[this[_0x66888(0x114)]],_0x2b17cb=[];for(let _0x33bedb=0x0;_0x33bedb<_0x1410a0['length'];++_0x33bedb){let _0x4da864=_0x33bedb==_0x1410a0[_0x66888(0x172)]-0x1?0x0:_0x33bedb+0x1,_0x1556f1=project_point_to_segment(_0x1410a0[_0x33bedb],_0x1410a0[_0x4da864],{'x':_0x5390b1,'y':_0x38b043});_0x1556f1['i']=_0x33bedb,_0x1556f1['j']=_0x4da864,_0x2b17cb[_0x66888(0xf6)](_0x1556f1);}_0x2b17cb[_0x66888(0x1ad)]((_0x299000,_0xea9c2b)=>_0x299000['d']-_0xea9c2b['d']);let _0x3e9ca1=get_distance(_0x1410a0[_0x2b17cb[0x0]['i']],_0x2b17cb[0x0]),_0x31de93=get_distance(_0x1410a0[_0x2b17cb[0x0]['j']],_0x2b17cb[0x0]),_0x19a2a2=_0x2b17cb[0x0]['d'],_0x3331fd=_0x3e9ca1<(WALL_HALF_WIDTH+DOOR_HALF_WIDTH)*context[_0x66888(0x13b)]||_0x31de93<(WALL_HALF_WIDTH+DOOR_HALF_WIDTH)*context['zoom']||_0x19a2a2>0x4*WALL_HALF_WIDTH*context['zoom'];_0x2a4d8c[_0x66888(0xdd)](_0x17fe48=>{const _0xc314ab=_0x66888;if(_0x17fe48['i']==_0x2b17cb[0x0]['i']&&_0x17fe48['j']==_0x2b17cb[0x0]['j']&&_0x17fe48!=_0x19f8b9){let _0x1ab42a=get_distance(_0x17fe48,_0x2b17cb[0x0]),_0x1104c5=(0x2*WINDOW_HALF_WIDTH+0x2*WALL_HALF_WIDTH)*context[_0xc314ab(0x13b)];_0x1ab42a<_0x1104c5&&(_0x3331fd=!![]);}}),_0xcea814[_0x66888(0xdd)](_0x1e79d5=>{const _0x29fb55=_0x66888;if(_0x1e79d5['i']==_0x2b17cb[0x0]['i']&&_0x1e79d5['j']==_0x2b17cb[0x0]['j']&&_0x1e79d5!=_0x19f8b9){let _0x217e3c=get_distance(_0x1e79d5,_0x2b17cb[0x0]),_0x1d4e84=WALL_HALF_WIDTH+0x2*DOOR_HALF_WIDTH*context[_0x29fb55(0x13b)];_0x217e3c<_0x1d4e84&&(_0x3331fd=!![]);}}),!_0x3331fd&&(_0x2b17cb[0x0][_0x66888(0xe8)]=!![],_0xcea814[_0x40c9e8]=_0x2b17cb[0x0]),this[_0x66888(0xf5)](),this[_0x66888(0x155)]=_0x5390b1,this[_0x66888(0xf0)]=_0x38b043;}else{if(this[_0x66888(0x164)]){let _0x1717a6=_0x2a4d8c[_0x40c9e8],_0x27ec18=[];for(let _0x1b5ea5=0x0;_0x1b5ea5<_0x1410a0['length'];++_0x1b5ea5){let _0x53a503=_0x1b5ea5==_0x1410a0[_0x66888(0x172)]-0x1?0x0:_0x1b5ea5+0x1,_0x3bfc0e=project_point_to_segment(_0x1410a0[_0x1b5ea5],_0x1410a0[_0x53a503],{'x':_0x5390b1,'y':_0x38b043});_0x3bfc0e['i']=_0x1b5ea5,_0x3bfc0e['j']=_0x53a503,_0x27ec18[_0x66888(0xf6)](_0x3bfc0e);}_0x27ec18[_0x66888(0x1ad)]((_0x5e731a,_0x55f735)=>_0x5e731a['d']-_0x55f735['d']);let _0x462590=get_distance(_0x1410a0[_0x27ec18[0x0]['i']],_0x27ec18[0x0]),_0x3c513d=get_distance(_0x1410a0[_0x27ec18[0x0]['j']],_0x27ec18[0x0]),_0x4a767d=_0x27ec18[0x0]['d'],_0x9dd01b=_0x462590<(WALL_HALF_WIDTH+WINDOW_HALF_WIDTH)*context['zoom']||_0x3c513d<(WALL_HALF_WIDTH+WINDOW_HALF_WIDTH)*context[_0x66888(0x13b)]||_0x4a767d>0x4*WALL_HALF_WIDTH*context[_0x66888(0x13b)];_0x2a4d8c[_0x66888(0xdd)](_0x2d1e67=>{const _0x54fce1=_0x66888;if(_0x2d1e67['i']==_0x27ec18[0x0]['i']&&_0x2d1e67['j']==_0x27ec18[0x0]['j']&&_0x2d1e67!=_0x1717a6){if(get_distance(_0x2d1e67,_0x27ec18[0x0])<(WALL_HALF_WIDTH+0x2*WINDOW_HALF_WIDTH)*context[_0x54fce1(0x13b)])_0x9dd01b=!![];}}),_0xcea814[_0x66888(0xdd)](_0x2f5563=>{const _0x3c5863=_0x66888;if(_0x2f5563['i']==_0x27ec18[0x0]['i']&&_0x2f5563['j']==_0x27ec18[0x0]['j']){let _0x1131a6=get_distance(_0x2f5563,_0x27ec18[0x0]),_0x284992=0x2*WALL_HALF_WIDTH+0x2*DOOR_HALF_WIDTH*context[_0x3c5863(0x13b)];_0x1131a6<_0x284992&&(_0x9dd01b=!![]);}}),!_0x9dd01b&&(_0x27ec18[0x0]['focused']=!![],_0x2a4d8c[this[_0x66888(0x114)]]=_0x27ec18[0x0]),this[_0x66888(0xf5)](),this[_0x66888(0x155)]=_0x5390b1,this[_0x66888(0xf0)]=_0x38b043;}else{if(context[_0x66888(0x198)][_0x66888(0x172)]>0x1){if(context[_0x66888(0xa1)]===_0x66888(0xac)||context['tool']===_0x66888(0x147)){let _0x420264=context[_0x66888(0x198)][0x0],_0xf0cd09=this['pinned'];this['pinned']=Math[_0x66888(0xdb)](_0x420264[_0x66888(0xc2)]-_0x5390b1)<=context[_0x66888(0xd6)]&&Math['abs'](_0x420264[_0x66888(0x93)]-_0x38b043)<=context['stick_offset'];this[_0x66888(0x19e)]&&(_0x5390b1=_0x420264['left'],_0x38b043=_0x420264[_0x66888(0x93)]);_0xf0cd09!=this[_0x66888(0x19e)]&&(_0xf0cd09?clone_svg(SVG[_0x66888(0xd5)],_0x5390b1,_0x38b043,function(_0x2af535){const _0x23843d=_0x66888;pthis[_0x23843d(0x15f)]['remove'](context[_0x23843d(0x198)][context[_0x23843d(0x198)]['length']-0x1]),pthis[_0x23843d(0x15f)][_0x23843d(0x15d)](_0x2af535),context[_0x23843d(0x198)][context[_0x23843d(0x198)][_0x23843d(0x172)]-0x1]=_0x2af535;}):clone_svg(SVG[_0x66888(0x119)],_0x5390b1,_0x38b043,function(_0x28dc02){const _0x28be2d=_0x66888;pthis['canvas'][_0x28be2d(0x177)](context[_0x28be2d(0x198)][context[_0x28be2d(0x198)][_0x28be2d(0x172)]-0x1]),pthis['canvas']['add'](_0x28dc02),context['points'][context[_0x28be2d(0x198)][_0x28be2d(0x172)]-0x1]=_0x28dc02;}));if(_0x55660a[_0x66888(0xb9)]===!![]){let _0x2e13fe=get_cell_size(),_0x22139f=function(_0xe63ff6,_0x5beef2){const _0xb50d2f=_0x66888;return Math[_0xb50d2f(0x15b)](_0xe63ff6/_0x5beef2)*_0x5beef2;},_0x3e5382=_0x22139f(_0x5390b1-context[_0x66888(0x17d)]['x'],_0x2e13fe)+context[_0x66888(0x17d)]['x'],_0x1dd6e9=_0x22139f(_0x38b043-context[_0x66888(0x17d)]['y'],_0x2e13fe)+context[_0x66888(0x17d)]['y'];_0x5390b1=_0x3e5382,_0x38b043=_0x1dd6e9,context[_0x66888(0xf4)][_0x66888(0x12b)]=![],context[_0x66888(0xd4)]['visible']=![];}else{if(!this[_0x66888(0x19e)]&&context['pin_x']&&context[_0x66888(0xd4)]){let _0x2860aa={};update_pins(_0x5390b1,_0x38b043,_0x2860aa);if(_0x2860aa['x'])_0x5390b1=_0x2860aa['x'];if(_0x2860aa['y'])_0x38b043=_0x2860aa['y'];}else this[_0x66888(0x19e)]&&context[_0x66888(0xf4)]&&context[_0x66888(0xd4)]&&(context['pin_x'][_0x66888(0x12b)]=![],context[_0x66888(0xd4)][_0x66888(0x12b)]=![]);}if(!this[_0x66888(0x19e)]&&_0x55660a['shiftKey']===!![]){let _0x1cf04e={};check_angle(_0x5390b1,_0x38b043,_0x1cf04e);if(_0x1cf04e['x'])_0x5390b1=_0x1cf04e['x'];if(_0x1cf04e['y'])_0x38b043=_0x1cf04e['y'];}}}}}}}if(context[_0x66888(0xa1)]==='wall'||context[_0x66888(0xa1)]===_0x66888(0x147)){let _0x4ac9a1=0x0,_0x3764a5=0x0;if(context[_0x66888(0x181)]){context[_0x66888(0x181)][_0x66888(0x18a)]({'x2':_0x5390b1,'y2':_0x38b043}),pthis[_0x66888(0x15f)][_0x66888(0xf5)]();let _0x45c83d=context[_0x66888(0x181)][_0x66888(0xc2)]-context[_0x66888(0x181)]['x2'],_0x27a216=context['line'][_0x66888(0x93)]-context[_0x66888(0x181)]['y2'];_0x4ac9a1=Math['sqrt'](_0x45c83d*_0x45c83d+_0x27a216*_0x27a216),_0x3764a5=Math['atan2'](_0x27a216,_0x45c83d)*radians_to_degrees;}if(context[_0x66888(0x91)]){context[_0x66888(0x91)][_0x66888(0x18a)]({'x2':_0x5390b1,'y2':_0x38b043}),pthis[_0x66888(0x15f)][_0x66888(0xf5)]();let _0x32e9a6=context[_0x66888(0x91)]['left']-context[_0x66888(0x91)]['x2'],_0x1a6710=context['lineDoor'][_0x66888(0x93)]-context[_0x66888(0x91)]['y2'];_0x4ac9a1=Math[_0x66888(0x18c)](_0x32e9a6*_0x32e9a6+_0x1a6710*_0x1a6710),_0x3764a5=Math[_0x66888(0x178)](_0x1a6710,_0x32e9a6)*radians_to_degrees;}context[_0x66888(0x184)]&&(context['rect']['set']({'width':-0x2*_0x4ac9a1,'angle':_0x3764a5}),this[_0x66888(0xf5)]());context[_0x66888(0x11a)]&&(context[_0x66888(0x11a)][_0x66888(0x18a)]({'width':-0x2*_0x4ac9a1,'angle':_0x3764a5}),this[_0x66888(0xf5)]());context[_0x66888(0x198)][_0x66888(0x172)]>0x1&&(context[_0x66888(0x198)][context[_0x66888(0x198)][_0x66888(0x172)]-0x1]['left']=_0x5390b1,context['points'][context['points'][_0x66888(0x172)]-0x1][_0x66888(0x93)]=_0x38b043,context[_0x66888(0x198)][context[_0x66888(0x198)]['length']-0x1]['setCoords']());if(context['rmes'])context[_0x66888(0x141)][_0x66888(0x90)]();}else{if(context[_0x66888(0xa1)]===_0x66888(0x1b4)){if(!context[_0x66888(0xc7)])return;let _0xcba188=context[_0x66888(0xc7)]['poly'][_0x66888(0xec)],_0xc77905=this[_0x66888(0x189)];_0xcba188[_0x66888(0xdd)](_0x190bc1=>{const _0x4b8fb9=_0x66888;let _0x37a59a=_0x190bc1['x'],_0x4b53eb=_0x190bc1['y'];Math['abs'](_0x37a59a-_0x55660a['clientX'])<=context[_0x4b8fb9(0x154)]*1.5&&Math['abs'](_0x4b53eb-_0x55660a['clientY'])<=context[_0x4b8fb9(0x154)]*1.5&&(_0xc77905=!![]);}),pthis[_0x66888(0x15f)][_0x66888(0x1b8)]=_0xc77905?'move':_0x66888(0x1bb),pthis[_0x66888(0x15f)][_0x66888(0xa7)]=_0xc77905?_0x66888(0x194):_0x66888(0x1bb);if(!this['isPointDragging']&&!this[_0x66888(0x164)]){let _0x3dcdd1=WINDOW_HALF_WIDTH*context[_0x66888(0x13b)],_0x425d92=WALL_HALF_WIDTH*context[_0x66888(0x13b)];context[_0x66888(0xc7)]['poly']['windows']['forEach'](_0x2a8506=>{const _0x5a8759=_0x66888;let _0x5063ca=(_0x3d9c6f,_0x3b907a)=>{return _0x3d9c6f['x']*_0x3b907a['x']+_0x3d9c6f['y']*_0x3b907a['y'];},_0xbae7e2=()=>{const _0x3edf2b=_0x9711;let _0x4bf583={'x':Math[_0x3edf2b(0xd3)](_0x2a8506['a']*degrees_to_radians),'y':Math[_0x3edf2b(0x1a4)](_0x2a8506['a']*degrees_to_radians)},_0x2d1299={'x':-_0x4bf583['y'],'y':_0x4bf583['x']},_0x2d9123={'x':0x2*_0x2d1299['x']*_0x425d92,'y':0x2*_0x2d1299['y']*_0x425d92},_0x1e2bfc={'x':0x2*_0x4bf583['x']*_0x3dcdd1,'y':0x2*_0x4bf583['y']*_0x3dcdd1},_0x217e42={'x':_0x5390b1-(_0x2a8506['x']-_0x4bf583['x']*_0x3dcdd1-_0x2d1299['x']*_0x425d92),'y':_0x38b043-(_0x2a8506['y']-_0x4bf583['y']*_0x3dcdd1-_0x2d1299['y']*_0x425d92)},_0x51e632=_0x5063ca(_0x217e42,_0x2d9123),_0x263b3d=_0x5063ca(_0x2d9123,_0x2d9123),_0x243664=_0x5063ca(_0x217e42,_0x1e2bfc),_0x722b6a=_0x5063ca(_0x1e2bfc,_0x1e2bfc);return 0x0<=_0x51e632&&_0x51e632<=_0x263b3d&&0x0<=_0x243664&&_0x243664<=_0x722b6a;};_0x2a8506[_0x5a8759(0xe8)]!=_0xbae7e2()&&(_0x2a8506[_0x5a8759(0xe8)]=!_0x2a8506[_0x5a8759(0xe8)],this['requestRenderAll']());});}if(!this[_0x66888(0x189)]&&!this['isDoorDragging']){let _0x51dde1=WINDOW_HALF_WIDTH*context[_0x66888(0x13b)],_0x4b2e62=WALL_HALF_WIDTH*context[_0x66888(0x13b)];context['current'][_0x66888(0xde)][_0x66888(0xe6)]['forEach'](_0x3b8f5f=>{const _0x48664c=_0x66888;let _0x457d86=(_0x3732ba,_0x5eb601)=>{return _0x3732ba['x']*_0x5eb601['x']+_0x3732ba['y']*_0x5eb601['y'];},_0x3acd63=()=>{let _0x18e1b9={'x':Math['cos'](_0x3b8f5f['a']*degrees_to_radians),'y':Math['sin'](_0x3b8f5f['a']*degrees_to_radians)},_0x24a0a3={'x':-_0x18e1b9['y'],'y':_0x18e1b9['x']},_0x517081={'x':0x2*_0x24a0a3['x']*_0x4b2e62,'y':0x2*_0x24a0a3['y']*_0x4b2e62},_0x2e15aa={'x':0x2*_0x18e1b9['x']*_0x51dde1,'y':0x2*_0x18e1b9['y']*_0x51dde1},_0x5d9fa8={'x':_0x5390b1-(_0x3b8f5f['x']-_0x18e1b9['x']*_0x51dde1-_0x24a0a3['x']*_0x4b2e62),'y':_0x38b043-(_0x3b8f5f['y']-_0x18e1b9['y']*_0x51dde1-_0x24a0a3['y']*_0x4b2e62)},_0x353634=_0x457d86(_0x5d9fa8,_0x517081),_0x1f2cbc=_0x457d86(_0x517081,_0x517081),_0x4ab015=_0x457d86(_0x5d9fa8,_0x2e15aa),_0x2735ba=_0x457d86(_0x2e15aa,_0x2e15aa);return 0x0<=_0x353634&&_0x353634<=_0x1f2cbc&&0x0<=_0x4ab015&&_0x4ab015<=_0x2735ba;};_0x3b8f5f[_0x48664c(0xe8)]!=_0x3acd63()&&(_0x3b8f5f['focused']=!_0x3b8f5f[_0x48664c(0xe8)],this['requestRenderAll']()),_0x3acd63()&&(pthis[_0x48664c(0x15f)][_0x48664c(0x1b8)]=_0x48664c(0x194),pthis[_0x48664c(0x15f)][_0x48664c(0xa7)]='move');});}}}}),pthis[_0x54c208(0x15f)]['on'](_0x54c208(0xc3),function(_0x3e0f23){const _0x418a66=_0x54c208;context['mouseDown']=![];if(this[_0x418a66(0x189)]){context[_0x418a66(0xc7)]&&context[_0x418a66(0xc7)][_0x418a66(0xde)]&&(context[_0x418a66(0xc7)]['poly'][_0x418a66(0x179)]=![]);let _0x4dfe9f=this[_0x418a66(0x114)];context[_0x418a66(0x198)][_0x418a66(0x172)]&&clone_svg(SVG[_0x418a66(0x13e)],context[_0x418a66(0x198)][_0x4dfe9f][_0x418a66(0xc2)],context[_0x418a66(0x198)][_0x4dfe9f][_0x418a66(0x93)],function(_0x44edac){const _0x3b74a4=_0x418a66;let _0x3c8b77=pthis[_0x3b74a4(0x15f)][_0x3b74a4(0xcc)][_0x3b74a4(0x150)](context[_0x3b74a4(0x198)][_0x4dfe9f]);pthis[_0x3b74a4(0x15f)][_0x3b74a4(0x177)](context[_0x3b74a4(0x198)][_0x4dfe9f]),pthis['canvas'][_0x3b74a4(0x118)](_0x44edac,_0x3c8b77),context[_0x3b74a4(0x198)][_0x4dfe9f]=_0x44edac;});}this[_0x418a66(0x117)]=![],this[_0x418a66(0x189)]=![],this[_0x418a66(0x164)]=![],this[_0x418a66(0xa4)]=![],this[_0x418a66(0x164)]=![],this[_0x418a66(0x19e)]=![],context[_0x418a66(0xf4)]&&context[_0x418a66(0xd4)]&&(context['pin_x'][_0x418a66(0x12b)]=![],context[_0x418a66(0xd4)][_0x418a66(0x12b)]=![],this[_0x418a66(0xf5)]());}),init_grid(),bg=new gridClass(),pthis[_0x54c208(0x15f)][_0x54c208(0x15d)](bg),pthis[_0x54c208(0x15f)]['moveTo'](bg,0x0),pthis[_0x54c208(0x15f)]['bg']=bg,pthis[_0x54c208(0x15f)][_0x54c208(0x13d)](),document[_0x54c208(0x157)](_0x54c208(0x1b6),function(_0x544002){const _0x46e8f5=_0x54c208;if(_0x544002['key']=='m'||_0x544002[_0x46e8f5(0x115)]=='M'){let _0x5909a0=document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))['style'][_0x46e8f5(0x14d)];document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))['style'][_0x46e8f5(0x14d)]=_0x5909a0===_0x46e8f5(0xf8)?_0x46e8f5(0x1b3):'none';}else{if(_0x544002[_0x46e8f5(0x115)]=='h'||_0x544002[_0x46e8f5(0x115)]=='H')alert('HotKeys\x20List:\x0a\x0aM\x20-\x20show/hide\x20menu\x0aS\x20-\x20toggle\x20measure\x20side\x0a\x20Edit\x20Mode:\x0a\x09Ctrl+LeftClick\x20-\x20drop\x20window\x0aCreate\x20Mode:\x0a\x09Move+Ctrl\x20-\x20bind\x20to\x20the\x20grid\x0a\x09Move+Shift\x20-\x205\x20angle\x20step');else{if(_0x544002[_0x46e8f5(0x115)]=='s'||_0x544002[_0x46e8f5(0x115)]=='S')change_side();else{if(_0x544002[_0x46e8f5(0xd7)]==0x1b)(context['tool']===_0x46e8f5(0xac)||context[_0x46e8f5(0xa1)]===_0x46e8f5(0x147))&&clean_creation(context);else{if(_0x544002[_0x46e8f5(0xd7)]==0x25)document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))[_0x46e8f5(0x16a)][_0x46e8f5(0x177)]('vertical',_0x46e8f5(0x93),_0x46e8f5(0xfa),_0x46e8f5(0x192)),document['getElementById']('tools')['classList'][_0x46e8f5(0x15d)](_0x46e8f5(0x125),_0x46e8f5(0xc2));else{if(_0x544002[_0x46e8f5(0xd7)]==0x26)document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))['classList'][_0x46e8f5(0x177)](_0x46e8f5(0x125),'left',_0x46e8f5(0x192),'bottom'),document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))[_0x46e8f5(0x16a)][_0x46e8f5(0x15d)](_0x46e8f5(0xba),_0x46e8f5(0x93));else{if(_0x544002['keyCode']==0x27)document[_0x46e8f5(0x100)](_0x46e8f5(0x1aa))[_0x46e8f5(0x16a)][_0x46e8f5(0x177)](_0x46e8f5(0xba),'top',_0x46e8f5(0xfa),_0x46e8f5(0xc2)),document['getElementById'](_0x46e8f5(0x1aa))[_0x46e8f5(0x16a)]['add'](_0x46e8f5(0x125),_0x46e8f5(0x192));else _0x544002[_0x46e8f5(0xd7)]==0x28&&(document[_0x46e8f5(0x100)]('tools')['classList'][_0x46e8f5(0x177)](_0x46e8f5(0x125),_0x46e8f5(0xc2),_0x46e8f5(0x192),'top'),document['getElementById'](_0x46e8f5(0x1aa))[_0x46e8f5(0x16a)]['add']('vertical','bottom'));}}}}}}});}function change_side(){const _0x5af1f2=_0x9711;context[_0x5af1f2(0x161)]=context['side']=='left'?_0x5af1f2(0x192):_0x5af1f2(0xc2);if(context[_0x5af1f2(0x141)])context[_0x5af1f2(0x141)]['update_points']();pthis['canvas']['renderAll']();}export function build_segments(){const _0xab074a=_0x9711;if(context[_0xab074a(0xc7)]){context[_0xab074a(0x184)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context[_0xab074a(0x184)]),context['rect']=null);context[_0xab074a(0x11a)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context[_0xab074a(0x11a)]),context[_0xab074a(0x11a)]=null);context[_0xab074a(0x181)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context[_0xab074a(0x181)]),context[_0xab074a(0x181)]=null);context[_0xab074a(0x91)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context[_0xab074a(0x91)]),context[_0xab074a(0x91)]=null);context[_0xab074a(0x107)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context['cofa']),context[_0xab074a(0x107)]=null);context[_0xab074a(0xf4)]&&(pthis[_0xab074a(0x15f)][_0xab074a(0x177)](context[_0xab074a(0xf4)]),context['pin_x']=null);context[_0xab074a(0xd4)]&&(pthis[_0xab074a(0x15f)]['remove'](context['pin_y']),context[_0xab074a(0xd4)]=null);if(!context[_0xab074a(0x184)]){let _0x641451=make_static(new fabric[(_0xab074a(0x1a5))]({'strokeWidth':0x2,'fill':colors['WindowActiveBG'],'stroke':colors[_0xab074a(0x19d)],'left':context[_0xab074a(0x104)][_0xab074a(0xc7)]['x'],'top':context['mouse'][_0xab074a(0xc7)]['y'],'width':0x2*WINDOW_HALF_WIDTH*context[_0xab074a(0x13b)],'height':0x2*WALL_HALF_WIDTH*context['zoom'],'originX':'center','originY':_0xab074a(0x162),'visible':![],'isWindow':!![],'otype':'window'}),!![]);pthis[_0xab074a(0x15f)][_0xab074a(0x15d)](_0x641451),context[_0xab074a(0x184)]=_0x641451;}if(!context[_0xab074a(0x11a)]){let _0x1df75c=make_static(new fabric['Rect']({'strokeWidth':0x2,'fill':colors[_0xab074a(0xd2)],'stroke':colors['DoorActiveOutline'],'left':context[_0xab074a(0x104)]['current']['x'],'top':context[_0xab074a(0x104)][_0xab074a(0xc7)]['y'],'width':0x2*DOOR_HALF_WIDTH*context['zoom'],'height':0x2*WALL_HALF_WIDTH*context[_0xab074a(0x13b)],'originX':_0xab074a(0x162),'originY':_0xab074a(0x162),'visible':![],'isDoor':!![],'otype':'door'}),!![]);pthis[_0xab074a(0x15f)][_0xab074a(0x15d)](_0x1df75c),context[_0xab074a(0x11a)]=_0x1df75c;}if(!context[_0xab074a(0x181)]){let _0x3f4490=make_static(new fabric['Line']([context[_0xab074a(0x104)][_0xab074a(0xc7)]['x']-WINDOW_HALF_WIDTH*context['zoom'],context[_0xab074a(0x104)]['current']['y'],context['mouse']['current']['x']+WINDOW_HALF_WIDTH*context['zoom'],context['mouse']['current']['y']],{'strokeWidth':0x1,'stroke':colors[_0xab074a(0x19d)],'originX':'center','originY':'center','visible':![],'otype':_0xab074a(0xae)}),!![]);pthis[_0xab074a(0x15f)][_0xab074a(0x15d)](_0x3f4490),context['line']=_0x3f4490;}if(!context[_0xab074a(0x91)]){let _0x21c537=make_static(new fabric[(_0xab074a(0xdf))]([context[_0xab074a(0x104)]['current']['x']-DOOR_HALF_WIDTH*context['zoom'],context[_0xab074a(0x104)]['current']['y'],context[_0xab074a(0x104)][_0xab074a(0xc7)]['x']+DOOR_HALF_WIDTH*context[_0xab074a(0x13b)],context[_0xab074a(0x104)][_0xab074a(0xc7)]['y']],{'strokeWidth':0x1,'stroke':colors[_0xab074a(0x1af)],'originX':_0xab074a(0x162),'originY':'center','visible':![],'otype':_0xab074a(0x8b)}),!![]);pthis['canvas']['add'](_0x21c537),context[_0xab074a(0x91)]=_0x21c537;}if(!context[_0xab074a(0x107)]&&context['furniture_type']){let _0x56ed37=null;$[_0xab074a(0x188)](urlsFurniture[context['active_cat']],function(_0x377f91,_0x3f0019){const _0x875028=_0xab074a;if(_0x3f0019[_0x875028(0x148)]===context['furniture_type'])return _0x56ed37=_0x3f0019,![];});if(!_0x56ed37)return;new fabric[(_0xab074a(0x1b7))][(_0xab074a(0x17a))](_0x56ed37[_0xab074a(0x137)],function(_0x359d7a){const _0x15bd00=_0xab074a;_0x359d7a[_0x15bd00(0x9c)](icon_w),_0x359d7a['scaleToHeight'](icon_w),_0x359d7a['visible']=![],pthis['canvas']['add'](_0x359d7a),context[_0x15bd00(0x107)]=_0x359d7a;});}}}export function on_set_tool(_0x122880=!![]){const _0x1472fa=_0x9711;if(context[_0x1472fa(0xa1)]==='reset')context[_0x1472fa(0x13b)]=ZOOM_DEFAULT,update_scale(),context[_0x1472fa(0x17d)]['x']=0x0,context[_0x1472fa(0x17d)]['y']=0x0,update_translation(),pthis[_0x1472fa(0x15f)][_0x1472fa(0x13d)]();else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0x185))clear_all();else{if(context['tool']===_0x1472fa(0xac)||context[_0x1472fa(0xa1)]===_0x1472fa(0x147))clean_creation(context);else{if(context[_0x1472fa(0xa1)]==='windows'||context[_0x1472fa(0xa1)]==='doors')clean_creation(context),build_segments();else{if(context['tool']===_0x1472fa(0xc8))build_segments();else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0xd8)){let _0x5b83f1=new canvas_to_json(context);_0x5b83f1[_0x1472fa(0x14c)](_0x1472fa(0xa9));}else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0xb6))clear_all(),document[_0x1472fa(0x180)](_0x1472fa(0x143))['click']();else{if(context['tool']===_0x1472fa(0xb8)){pthis[_0x1472fa(0x15f)][_0x1472fa(0x177)](pthis[_0x1472fa(0x15f)]['bg']),costil(),pthis[_0x1472fa(0x15f)][_0x1472fa(0x13d)]();var _0x18d39b=pthis['canvas']['toDataURL']({'format':'jpeg','quality':0.8});costil(),pthis[_0x1472fa(0x15f)][_0x1472fa(0x13d)]();var _0x450ce7=document['createElement']('a');_0x450ce7[_0x1472fa(0x1a7)]=_0x18d39b,_0x450ce7[_0x1472fa(0x165)]=_0x1472fa(0xe5),_0x450ce7[_0x1472fa(0xad)](),pthis[_0x1472fa(0x15f)]['add'](bg),pthis[_0x1472fa(0x15f)][_0x1472fa(0x19b)](bg),context[_0x1472fa(0xa1)]='cursor',SavePng();}else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0x113)){let _0x87ca98=generate_svg(()=>{});if(!_0x87ca98)return;get_svg(_0x87ca98),context[_0x1472fa(0xa1)]=_0x1472fa(0x1b4),SavePdf();}else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0x1b4))_0x122880&&show_points();else{if(context[_0x1472fa(0xa1)]===_0x1472fa(0x140)){const _0x3a823f=async(_0x5d5369,_0x2a5719)=>{const _0x1f123d=_0x1472fa,_0x4c0916='showSaveFilePicker'in window&&((()=>{const _0x5a6976=_0x9711;try{return window[_0x5a6976(0x14e)]===window[_0x5a6976(0x93)];}catch{return![];}})());if(_0x4c0916)try{const _0x5deadf=await showSaveFilePicker({'suggestedName':_0x2a5719,'types':[{'description':'SVG','accept':{'image/svg':['.svg']}}]}),_0x2eba84=await _0x5deadf[_0x1f123d(0xe9)]();await _0x2eba84[_0x1f123d(0x16f)](_0x5d5369),await _0x2eba84[_0x1f123d(0x108)]();return;}catch(_0x4bd8fe){if(_0x4bd8fe['name']!=='AbortError'){console[_0x1f123d(0x15e)](_0x4bd8fe[_0x1f123d(0x10b)],_0x4bd8fe[_0x1f123d(0x14f)]);return;}}else{var _0x28812a=new Blob([_0x5d5369],{'type':_0x1f123d(0xb1)}),_0x1d1fce=URL[_0x1f123d(0x15a)](_0x28812a),_0x46a70f=document['createElement']('a');_0x46a70f['href']=_0x1d1fce,_0x46a70f[_0x1f123d(0x165)]=_0x1f123d(0xeb),document[_0x1f123d(0x128)][_0x1f123d(0x8c)](_0x46a70f),_0x46a70f[_0x1f123d(0xad)](),URL[_0x1f123d(0x17f)](_0x1d1fce),document[_0x1f123d(0x128)]['removeChild'](_0x46a70f);}SaveSvg();};generate_svg(_0x3a823f),context[_0x1472fa(0xa1)]=_0x1472fa(0x1b4);}}}}}}}}}}}}function costil(){const _0x29e75a=_0x9711;for(let _0xb6b3aa=0x0;_0xb6b3aa<context[_0x29e75a(0x18f)][_0x29e75a(0x172)];_0xb6b3aa++){const _0x277893=context[_0x29e75a(0x18f)][_0xb6b3aa];update_floor(_0x277893[_0x29e75a(0xde)]);}}export function clear_all(){const _0x5e4884=_0x9711;return clean_creation(context),context[_0x5e4884(0x18f)]['forEach'](_0x3f0528=>{const _0x1b3e5d=_0x5e4884;pthis['canvas'][_0x1b3e5d(0x177)](_0x3f0528[_0x1b3e5d(0xde)]),pthis[_0x1b3e5d(0x15f)]['remove'](_0x3f0528[_0x1b3e5d(0xde)][_0x1b3e5d(0x9b)]),_0x3f0528[_0x1b3e5d(0xde)]=null;}),context[_0x5e4884(0x18f)]=[],context[_0x5e4884(0xc7)]=null,pthis[_0x5e4884(0x15f)][_0x5e4884(0xa3)](),bg=new gridClass(),pthis['canvas'][_0x5e4884(0x15d)](bg),pthis[_0x5e4884(0x15f)][_0x5e4884(0x19b)](bg),pthis[_0x5e4884(0x15f)]['bg']=bg,pthis[_0x5e4884(0x15f)][_0x5e4884(0x13d)](),!![];}function checkCursorOnCounter(_0x6bee9f){}export function createRoomFromJson(_0x3c9234){const _0x1421f2=_0x9711;context['tool']=_0x1421f2(0xac),on_set_tool();if(_0x3c9234[_0x1421f2(0x10f)][_0x1421f2(0x172)]){newPoly[_0x1421f2(0x10f)]=[];for(let _0x30c871=0x0;_0x30c871<_0x3c9234['furnitures'][_0x1421f2(0x172)];_0x30c871++){let {url:_0x5a1280,fill:_0x5f2270,left:_0x566e32,top:_0x2d85a4,scaleX:_0x4573fc,scaleY:_0x13b91e}=_0x3c9234[_0x1421f2(0x10f)][_0x30c871];createFurniture(_0x5a1280,_0x5f2270)[_0x1421f2(0x19f)](_0x3fceee=>{const _0x5028db=_0x1421f2;let _0x2df1ee=_0x5a1280[_0x5028db(0xd9)]('/')['pop']()[_0x5028db(0xd9)]('.')[0x0];_0x3fceee['set']({'left':_0x566e32,'top':_0x2d85a4,'scaleX':_0x4573fc,'scaleY':_0x13b91e,'furniture_type':_0x2df1ee}),_0x3fceee[_0x5028db(0xc2)]-=_0x3fceee[_0x5028db(0x103)]*_0x4573fc/0x2,_0x3fceee[_0x5028db(0x93)]-=_0x3fceee[_0x5028db(0x99)]*_0x13b91e/0x2,pthis[_0x5028db(0x15f)][_0x5028db(0x15d)](_0x3fceee),newPoly[_0x5028db(0x10f)][_0x5028db(0xf6)](_0x3fceee);})['catch'](_0x39c40b=>{const _0x599b3c=_0x1421f2;console[_0x599b3c(0x15e)](_0x39c40b);});}}for(let _0xb31fdc=0x0;_0xb31fdc<_0x3c9234['base']['length'];_0xb31fdc++){const _0x942fd1=_0x3c9234['base'][_0xb31fdc];let {x:_0x2dc1b1,y:_0x5ed116}=_0x942fd1;process_polygon(_0x2dc1b1,_0x5ed116,_0x2dc1b1,_0x5ed116),pthis['canvas']['renderAll']();}let _0x43c075=_0x3c9234[_0x1421f2(0xec)][0x0];process_polygon(_0x43c075['x'],_0x43c075['y'],_0x43c075['x'],_0x43c075['y']),pthis[_0x1421f2(0x15f)][_0x1421f2(0x13d)](),context[_0x1421f2(0xa1)]='cursor';}function FirstRoomBeenLocked(){const _0x5280bc=_0x9711;main_statistic[_0x5280bc(0xcf)](_0x5280bc(0xbb)),main_statistic[_0x5280bc(0x120)](_0x5280bc(0xbb));}function RoomsInOneProject(){const _0x2edf15=_0x9711;main_statistic[_0x2edf15(0xcf)](_0x2edf15(0xd8)),main_statistic[_0x2edf15(0x120)](_0x2edf15(0xd8));}export function DoorAdd(){const _0x2f2a58=_0x9711;main_statistic['yandex_metrica'](_0x2f2a58(0xd1)),main_statistic['SaveStat'](_0x2f2a58(0xd1));}export function WindowAdd(){const _0x18d28a=_0x9711;main_statistic[_0x18d28a(0xcf)](_0x18d28a(0x176)),main_statistic[_0x18d28a(0x120)](_0x18d28a(0x176));}function _0x558e(){const _0x206ec6=['dispose','size','ceil','zoom','origPosY','renderAll','Inactive','attr','export','rmes','./files/img/interface/window_preview.png','#fileInput','extend','deltaY','#3C95FF','wall2','type','SaveAll','70YlKQjT','black','downloadJSON','display','self','message','indexOf','shiftKey','header','Start','radius','lastPosX','loadSVGFromURL','addEventListener','selection:updated','addClass','createObjectURL','round','point_closed','add','error','canvas','outer','side','center','removeClass','isWindowDragging','download','strokeStyle','altKey','4143iSpweZ','bringToFront','classList','118sYWzxA','font','middle','/filling/','write','.filling_content_panel','oCoords','length','Object','SavePdf','object:rotating','Window','remove','atan2','changing','fromURL','flipH','.actions_panel\x20.action#del','origin','3025300rTPkHB','revokeObjectURL','querySelector','line','update_area','object:added','rect','new','update_aabb','#ffffff','each','isPointDragging','set','scaleY','sqrt','object:modified','#33cccc4d','contour','WallActiveFill','7KfjvNN','right','#3333334d','move','mouseOver','group','svg','points','#C1E0E0','white','sendToBack','closed_contour','WindowActiveOutline','pinned','then','modified','.active_item_icon\x20img','object','fill','sin','Rect','footer','href','object:over','draw_content','tools','\x20','debug','sort','\x20\x20','DoorActiveOutline','util','[data-mode=\x22draw\x22]','callSuper','block','cursor','splice','keyup','Image','hoverCursor','origWeight','Group','default','active','mouseMove','doorLine','appendChild','Furniture','object:scaling','originY','update_points','lineDoor','beginPath','top','6XPsxsX','.actions_panel\x20.flip#rotate','is_counterclockwise','origScaleX','data-del-door','height','one','floor','scaleToWidth','door','pt1','unshift','_render','tool','offsetY','clear','isDoorDragging','polyClass','number_room','defaultCursor','.actions_panel\x20.flip#horizontal','2d_project','1886764aMcota','windows','wall','click','windowLine','clockwise','startPosX','image/svg+xml','clientX','stroke','target','setHeight','open','object:out','png','ctrlKey','vertical','FirstRoomBeenLocked','individual','getActiveObject','pt2','clientY','measure','DoorBG','left','mouse:up','fillText','groupSVGElements','closePath','current','import','pop','point_add','hand','_objects','selectionRect','preventDefault','yandex_metrica','2940FSIrZf','Door','DoorActiveBG','cos','pin_y','Add','stick_offset','keyCode','save','split','angle','abs','mesClass','forEach','poly','Line','innerHeight','MAX_VALUE','trunc','SavePng','lineWidth','canvas_image.png','doors','.actions_panel\x20.length_input\x20input','focused','createWritable','3813075hshCee','image.svg','base','show','moveTo','.actions_panel','lastPosY','SaveSvg','.svg','Polygon','pin_x','requestRenderAll','push','setWidth','none','#333333','bottom','5233672qqNiLf','selected','restore','resize','mouse:down','getElementById','toFixed','furniture_type','width','mouse','selection:created','point_inactive','cofa','close','setCoords','1203205nvoQIy','name','WallActiveOutline','.actions_panel\x20.angle_input\x20input','uid','furnitures','scaleX','point_start','area','load_pdf','dragIndex','key','textBaseline','isDragging','insertAt','Highlight','rectDoor','flipV','origHeight','hide','innerWidth','catch','SaveStat','origScaleY','LineMatch','inner','.actions_panel\x20.action#copy','horizontal','lineTo','active_cat','body','data-del-window','selectedFurniture','visible','val','aabb','.actions_panel.show','origPosX','src','aCoords','.actions_panel\x20.width_input\x20input','fillStyle','createClass','px\x20sans-serif','.actions_panel\x20.clear_transform','url'];_0x558e=function(){return _0x206ec6;};return _0x558e();}export function FurnitureAdd(){const _0x4c34a0=_0x9711;main_statistic[_0x4c34a0(0xcf)](_0x4c34a0(0x8d)),main_statistic['SaveStat']('Furniture');}function SavePng(){const _0x3483b8=_0x9711;main_statistic[_0x3483b8(0xcf)](_0x3483b8(0xe3)),main_statistic[_0x3483b8(0x120)](_0x3483b8(0xe3)),SaveAll();}function SaveSvg(){const _0xdd8618=_0x9711;main_statistic[_0xdd8618(0xcf)](_0xdd8618(0xf1)),main_statistic[_0xdd8618(0x120)](_0xdd8618(0xf1)),SaveAll();}function SavePdf(){const _0x56cc6c=_0x9711;main_statistic['yandex_metrica'](_0x56cc6c(0x174)),main_statistic[_0x56cc6c(0x120)](_0x56cc6c(0x174)),SaveAll();}function SaveAll(){const _0x1a1ec8=_0x9711;main_statistic['yandex_metrica'](_0x1a1ec8(0x149)),main_statistic['SaveStat'](_0x1a1ec8(0x149));}
const _0x3417c1=_0x49e6;(function(_0x2f9e03,_0x270e4e){const _0x51e9bd=_0x49e6,_0x17aaba=_0x2f9e03();while(!![]){try{const _0x192c4b=parseInt(_0x51e9bd(0x1c2))/0x1*(parseInt(_0x51e9bd(0x1e5))/0x2)+parseInt(_0x51e9bd(0x1dc))/0x3+parseInt(_0x51e9bd(0x167))/0x4*(-parseInt(_0x51e9bd(0x189))/0x5)+parseInt(_0x51e9bd(0x175))/0x6+-parseInt(_0x51e9bd(0x1b7))/0x7*(-parseInt(_0x51e9bd(0x18b))/0x8)+parseInt(_0x51e9bd(0x169))/0x9*(parseInt(_0x51e9bd(0x17a))/0xa)+-parseInt(_0x51e9bd(0x1a5))/0xb;if(_0x192c4b===_0x270e4e)break;else _0x17aaba['push'](_0x17aaba['shift']());}catch(_0x4afe2b){_0x17aaba['push'](_0x17aaba['shift']());}}}(_0xbf36,0x32a6e));import{createRoomFromJson,clear_all,build_segments,on_set_tool,createFurniture,isContourMouseMove,hide_actions,show_actions,isContourMouseDown,DoorAdd,WindowAdd,FurnitureAdd}from'./main.js';let canCreateRoom=![],height_room=0x0,width_room=0x0,lastCoords={'x':0x0,'y':0x0};$(document)[_0x3417c1(0x181)](function(){const _0x1bcf41=_0x3417c1;new_project(),$(_0x1bcf41(0x199))['on'](_0x1bcf41(0x188),function(){const _0x2ce575=_0x1bcf41;$[_0x2ce575(0x163)](_0x2ce575(0x171)),height_room=0x0,width_room=0x0;}),$(_0x1bcf41(0x159))['on'](_0x1bcf41(0x19a),function(_0x44f56e){const _0x9a409d=_0x1bcf41;console[_0x9a409d(0x1a2)]();let _0x12b7cb,_0x4d0e67;this['id']==_0x9a409d(0x190)?(_0x12b7cb=parseFloat($(this)[_0x9a409d(0x176)]()),_0x4d0e67=parseFloat($(this)['parent']()[_0x9a409d(0x1a3)]()[_0x9a409d(0x157)](_0x9a409d(0x1c8))[_0x9a409d(0x176)]())):(_0x4d0e67=parseFloat($(this)['val']()),_0x12b7cb=parseFloat($(this)[_0x9a409d(0x173)]()[_0x9a409d(0x179)]()[_0x9a409d(0x157)](_0x9a409d(0x17b))['val']()));if(_0x12b7cb<0x0){$(_0x9a409d(0x17b))[_0x9a409d(0x176)]('');return;}if(_0x4d0e67<0x0){$(_0x9a409d(0x1c8))[_0x9a409d(0x176)]('');return;}let _0x51ce4a=$(this)['data']('template');_0x51ce4a&&(_0x12b7cb=_0x4d0e67);if(isNaN(_0x12b7cb)||isNaN(_0x4d0e67)){canCreateRoom=![],$(_0x9a409d(0x1fa))['addClass'](_0x9a409d(0x155)),$(_0x9a409d(0x1cc))[_0x9a409d(0x1ad)](0x0+_0x9a409d(0x1c7))[_0x9a409d(0x1e0)]('<sup>2</sup>');return;}let _0x48ecd5=_0x4d0e67*_0x12b7cb;console['log'](_0x48ecd5['toFixed'](0x2));let _0x56e6c3=0x2;_0x48ecd5[_0x9a409d(0x1ac)](0x2)[_0x9a409d(0x1a6)]('00')&&(_0x56e6c3=0x0),$(_0x9a409d(0x1cc))[_0x9a409d(0x1ad)](_0x48ecd5['toFixed'](_0x56e6c3)+'\x20м\x20')['append']('<sup>2</sup>'),height_room=_0x4d0e67,width_room=_0x12b7cb,canCreateRoom=!![],$(_0x9a409d(0x1fa))[_0x9a409d(0x14b)](_0x9a409d(0x155));}),$('.createRectRoom_btn#close')['on'](_0x1bcf41(0x188),function(){const _0x31b9eb=_0x1bcf41;$[_0x31b9eb(0x163)](_0x31b9eb(0x171));}),$('#new_project')['on'](_0x1bcf41(0x188),function(){const _0x3c222c=_0x1bcf41;$(_0x3c222c(0x1d6))[_0x3c222c(0x187)]('show'),$(_0x3c222c(0x1f8))['arcticmodal']({'midClick':!![],'closeBtnInside':!![],'closeOnContentClick':![],'closeOnBgClick':![],'afterOpen':function(){const _0x56ee01=_0x3c222c;$(_0x56ee01(0x16f))[_0x56ee01(0x1e7)]('click',function(_0xb5426){const _0x4ae3ae=_0x56ee01;$[_0x4ae3ae(0x163)](_0x4ae3ae(0x171)),setTimeout(()=>{const _0x2f1c48=_0x4ae3ae;clear_all(),new_project(),$(_0x2f1c48(0x1d6))[_0x2f1c48(0x14b)](_0x2f1c48(0x1d5));},0x64);}),$(_0x56ee01(0x1a0))[_0x56ee01(0x1e7)](_0x56ee01(0x188),function(_0x45ae51){const _0x3d79ff=_0x56ee01;context['tool']='cursor',$[_0x3d79ff(0x163)](_0x3d79ff(0x171));});}});}),$(_0x1bcf41(0x14d))['on'](_0x1bcf41(0x19e),function(_0x5cb166){const _0x2d78aa=_0x1bcf41;let _0x304ac9=this['parentElement']['parentElement'];context[_0x2d78aa(0x1f5)]=_0x304ac9[_0x2d78aa(0x19c)](_0x2d78aa(0x1dd)),on_set_tool(),$(_0x304ac9)[_0x2d78aa(0x187)](_0x2d78aa(0x1ed));}),$(_0x1bcf41(0x14c))['on'](_0x1bcf41(0x19d),_0x2721ac=>{const _0x23c608=_0x1bcf41;let _0x1cf61d=_0x2721ac[_0x23c608(0x1b3)]-$(_0x23c608(0x158))['width'](),_0x1f4834=_0x2721ac[_0x23c608(0x141)]-$(_0x23c608(0x1cf))[_0x23c608(0x144)]();if((!context['current']||!context[_0x23c608(0x1c4)][_0x23c608(0x140)])&&(context[_0x23c608(0x1f5)]!==_0x23c608(0x1bb)&&context[_0x23c608(0x1f5)]!==_0x23c608(0x18e)&&context[_0x23c608(0x1f5)]!==_0x23c608(0x1fc)))return;isContourMouseMove(_0x1cf61d,_0x1f4834);let _0x3544c2=context[_0x23c608(0x1c4)]['poly'][_0x23c608(0x1bf)],_0x1ad536=context[_0x23c608(0x1c4)]['poly'][_0x23c608(0x1bb)],_0x567d24=context[_0x23c608(0x1c4)][_0x23c608(0x140)][_0x23c608(0x18e)],_0x5ad5e1=[];for(let _0x226382=0x0;_0x226382<_0x3544c2[_0x23c608(0x17d)];++_0x226382){let _0x4e9dec=_0x226382==_0x3544c2[_0x23c608(0x17d)]-0x1?0x0:_0x226382+0x1,_0x152ee0=project_point_to_segment(_0x3544c2[_0x226382],_0x3544c2[_0x4e9dec],{'x':_0x1cf61d,'y':_0x1f4834});_0x152ee0['i']=_0x226382,_0x152ee0['j']=_0x4e9dec,_0x5ad5e1['push'](_0x152ee0);}_0x5ad5e1[_0x23c608(0x1ef)]((_0x1cf054,_0x434cf9)=>_0x1cf054['d']-_0x434cf9['d']);let _0x22a0ae=get_distance(_0x3544c2[_0x5ad5e1[0x0]['i']],_0x5ad5e1[0x0]),_0x494758=get_distance(_0x3544c2[_0x5ad5e1[0x0]['j']],_0x5ad5e1[0x0]),_0x32bc59=_0x5ad5e1[0x0]['d'];if(context['tool']=='windows'){let _0x50fd48=_0x22a0ae<(WALL_HALF_WIDTH+WINDOW_HALF_WIDTH)*context[_0x23c608(0x1f4)]||_0x494758<(WALL_HALF_WIDTH+WINDOW_HALF_WIDTH)*context[_0x23c608(0x1f4)]||_0x32bc59>0x4*WALL_HALF_WIDTH*context['zoom'];_0x1ad536[_0x23c608(0x1c5)](_0x383b9a=>{if(_0x383b9a['i']==_0x5ad5e1[0x0]['i']&&_0x383b9a['j']==_0x5ad5e1[0x0]['j']){let _0x3f4f36=get_distance(_0x383b9a,_0x5ad5e1[0x0]),_0x20dd46=WALL_HALF_WIDTH+0x2*WINDOW_HALF_WIDTH*context['zoom'];_0x3f4f36<_0x20dd46&&(_0x50fd48=!![]);}}),_0x567d24['forEach'](_0x1a319b=>{const _0x10fb99=_0x23c608;if(_0x1a319b['i']==_0x5ad5e1[0x0]['i']&&_0x1a319b['j']==_0x5ad5e1[0x0]['j']){let _0x116b87=get_distance(_0x1a319b,_0x5ad5e1[0x0]),_0x1e0840=0x2*WALL_HALF_WIDTH+0x2*DOOR_HALF_WIDTH*context[_0x10fb99(0x1f4)];_0x116b87<_0x1e0840&&(_0x50fd48=!![]);}}),context['rect']['visible']=!_0x50fd48,context[_0x23c608(0x1e4)][_0x23c608(0x1d0)]=!_0x50fd48,context[_0x23c608(0x1f0)][_0x23c608(0x198)]({'left':_0x5ad5e1[0x0]['x'],'top':_0x5ad5e1[0x0]['y'],'angle':_0x5ad5e1[0x0]['a']}),context[_0x23c608(0x1e4)][_0x23c608(0x198)]({'left':_0x5ad5e1[0x0]['x'],'top':_0x5ad5e1[0x0]['y'],'angle':_0x5ad5e1[0x0]['a']}),context[_0x23c608(0x15c)]=_0x50fd48?null:_0x5ad5e1[0x0];}else{if(context[_0x23c608(0x1f5)]==_0x23c608(0x18e)){let _0x544cc8=get_distance(_0x3544c2[_0x5ad5e1[0x0]['i']],_0x5ad5e1[0x0])<(WALL_HALF_WIDTH+DOOR_HALF_WIDTH)*context['zoom']||get_distance(_0x3544c2[_0x5ad5e1[0x0]['j']],_0x5ad5e1[0x0])<(WALL_HALF_WIDTH+DOOR_HALF_WIDTH)*context[_0x23c608(0x1f4)]||_0x5ad5e1[0x0]['d']>0x4*WALL_HALF_WIDTH*context['zoom'];_0x567d24['forEach'](_0x3462a2=>{const _0x13abcf=_0x23c608;if(_0x3462a2['i']==_0x5ad5e1[0x0]['i']&&_0x3462a2['j']==_0x5ad5e1[0x0]['j']){let _0x4da030=get_distance(_0x3462a2,_0x5ad5e1[0x0]),_0x2a71c9=0x2*DOOR_HALF_WIDTH*context[_0x13abcf(0x1f4)];_0x4da030<_0x2a71c9&&(_0x544cc8=!![]);}}),_0x1ad536[_0x23c608(0x1c5)](_0x47c05a=>{const _0x52323a=_0x23c608;if(_0x47c05a['i']==_0x5ad5e1[0x0]['i']&&_0x47c05a['j']==_0x5ad5e1[0x0]['j']){let _0x58ec52=get_distance(_0x47c05a,_0x5ad5e1[0x0]),_0x576a9b=(DOOR_HALF_WIDTH+WINDOW_HALF_WIDTH)*context[_0x52323a(0x1f4)];_0x58ec52<_0x576a9b&&(_0x544cc8=!![]);}}),context[_0x23c608(0x1b6)][_0x23c608(0x1d0)]=!_0x544cc8,context[_0x23c608(0x1d9)][_0x23c608(0x1d0)]=!_0x544cc8,context[_0x23c608(0x1b6)][_0x23c608(0x198)]({'left':_0x5ad5e1[0x0]['x'],'top':_0x5ad5e1[0x0]['y'],'angle':_0x5ad5e1[0x0]['a']}),context[_0x23c608(0x1d9)][_0x23c608(0x198)]({'left':_0x5ad5e1[0x0]['x'],'top':_0x5ad5e1[0x0]['y'],'angle':_0x5ad5e1[0x0]['a']}),context[_0x23c608(0x183)]=_0x544cc8?null:_0x5ad5e1[0x0];}}lastCoords['x']=_0x1cf61d,lastCoords['y']=_0x1f4834,pthis[_0x23c608(0x145)][_0x23c608(0x1ce)]();}),$(document)['on'](_0x1bcf41(0x188),function(_0x11ec71){const _0x3cd125=_0x1bcf41;!$(_0x11ec71[_0x3cd125(0x168)])['closest']('.save_button_block')[_0x3cd125(0x17d)]&&$(_0x3cd125(0x16b))[_0x3cd125(0x14b)]('active');}),$(_0x1bcf41(0x1e2))['on'](_0x1bcf41(0x19e),function(_0x4e5686){const _0x2cf2f5=_0x1bcf41;let _0x2e857f=this['parentElement']['parentElement'];context[_0x2cf2f5(0x1f5)]=_0x2cf2f5(0x1fc),context[_0x2cf2f5(0x1a7)]=$(_0x2cf2f5(0x13f))['attr'](_0x2cf2f5(0x166)),context[_0x2cf2f5(0x18d)]=_0x2e857f['getAttribute'](_0x2cf2f5(0x1ba)),on_set_tool(),$(this)['addClass']('active');}),$(_0x1bcf41(0x14d))['on'](_0x1bcf41(0x1a8),function(_0x28df48){const _0x1397ca=_0x1bcf41;$(this[_0x1397ca(0x1b4)][_0x1397ca(0x1b4)])[_0x1397ca(0x14b)](_0x1397ca(0x1ed));if(!context[_0x1397ca(0x1c4)]){context[_0x1397ca(0x1f5)]=_0x1397ca(0x186);return;}context[_0x1397ca(0x15c)]&&(isContourMouseDown(lastCoords['x'],lastCoords['y']),context[_0x1397ca(0x1c4)][_0x1397ca(0x140)][_0x1397ca(0x1bb)][_0x1397ca(0x1d7)](context['window']),context[_0x1397ca(0x1f0)]['visible']=![],context[_0x1397ca(0x1e4)][_0x1397ca(0x1d0)]=![],context[_0x1397ca(0x15c)]=null,hide_actions(),WindowAdd(),$('.active_item_icon\x20img')[_0x1397ca(0x1db)](_0x1397ca(0x1b1),_0x1397ca(0x1d8)),$(_0x1397ca(0x185))[_0x1397ca(0x187)](_0x1397ca(0x1d5)),$(_0x1397ca(0x19b))[_0x1397ca(0x191)](_0x1397ca(0x188)),$(_0x1397ca(0x19b))['attr']('data-del-window',context[_0x1397ca(0x1c4)][_0x1397ca(0x140)][_0x1397ca(0x1bb)][_0x1397ca(0x17d)]-0x1),$(_0x1397ca(0x19b))['one'](_0x1397ca(0x188),function(){const _0x3dec87=_0x1397ca;context['current']['poly'][_0x3dec87(0x1bb)]['splice']($(this)['attr'](_0x3dec87(0x17e)),0x1),$(_0x3dec87(0x185))[_0x3dec87(0x14b)](_0x3dec87(0x1d5)),pthis['canvas']['requestRenderAll']();}));context['door']&&(isContourMouseDown(lastCoords['x'],lastCoords['y']),context[_0x1397ca(0x1c4)][_0x1397ca(0x140)][_0x1397ca(0x18e)][_0x1397ca(0x1d7)](context[_0x1397ca(0x183)]),context['rectDoor'][_0x1397ca(0x1d0)]=![],context[_0x1397ca(0x1d9)]['visible']=![],context[_0x1397ca(0x183)]=null,hide_actions(),DoorAdd(),$(_0x1397ca(0x18a))['attr']('src',_0x1397ca(0x195)),$(_0x1397ca(0x185))['addClass']('show'),$(_0x1397ca(0x19b))[_0x1397ca(0x191)](_0x1397ca(0x188)),$('.actions_panel\x20.action#del')[_0x1397ca(0x1db)](_0x1397ca(0x143),context[_0x1397ca(0x1c4)][_0x1397ca(0x140)]['doors']['length']-0x1),$(_0x1397ca(0x19b))['one']('click',function(){const _0x140e6b=_0x1397ca;context[_0x140e6b(0x1c4)]['poly'][_0x140e6b(0x18e)][_0x140e6b(0x1b9)]($(this)[_0x140e6b(0x1db)]('data-del-door'),0x1),$(_0x140e6b(0x185))[_0x140e6b(0x14b)](_0x140e6b(0x1d5)),pthis['canvas'][_0x140e6b(0x1df)]();}));context[_0x1397ca(0x1f5)]=_0x1397ca(0x186);let _0x5da8f8=canvas[_0x1397ca(0x16c)]();_0x5da8f8&&(_0x5da8f8['eventsSet']=![],canvas[_0x1397ca(0x193)]());}),$(_0x1bcf41(0x1e2))['on'](_0x1bcf41(0x1a8),function(_0x13b0e2){const _0x2fe959=_0x1bcf41;context['tool']=_0x2fe959(0x186);if(!context['current'])return;let _0x11b08f=_0x13b0e2[_0x2fe959(0x1b3)]-$(_0x2fe959(0x158))[_0x2fe959(0x1eb)](),_0x5b7992=_0x13b0e2['clientY']-$(_0x2fe959(0x1cf))[_0x2fe959(0x144)](),{dimensions:_0x2c2331,url:_0x592d81}=get_furn_obj(context[_0x2fe959(0x1a7)],context[_0x2fe959(0x18d)]),_0x425ea2='black';$(this['parentElement'][_0x2fe959(0x1b4)])[_0x2fe959(0x14b)]('active');let _0x87ce35=canvas[_0x2fe959(0x16c)]();_0x87ce35&&(_0x87ce35[_0x2fe959(0x1a1)]=![],canvas[_0x2fe959(0x193)]()),createFurniture(_0x592d81,_0x425ea2)[_0x2fe959(0x1b2)](_0x36aab2=>{const _0x4ace8a=_0x2fe959;isContourMouseDown(lastCoords['x'],lastCoords['y']),_0x36aab2[_0x4ace8a(0x198)]({'left':lastCoords['x'],'top':lastCoords['y'],'angle':0x0,'scaleX':_0x2c2331[_0x4ace8a(0x1eb)]/_0x36aab2['width'],'scaleY':_0x2c2331[_0x4ace8a(0x144)]/_0x36aab2['height'],'originX':'center','originY':'center','furniture_type':context[_0x4ace8a(0x18d)],'url':_0x592d81}),show_actions(),_0x36aab2[_0x4ace8a(0x164)](),FurnitureAdd(),pthis[_0x4ace8a(0x145)][_0x4ace8a(0x1e3)](_0x36aab2),context[_0x4ace8a(0x1c4)][_0x4ace8a(0x140)]['furnitures']['push'](_0x36aab2),pthis['canvas'][_0x4ace8a(0x1ce)]();})[_0x2fe959(0x1fb)](_0x5932c3=>{const _0x813829=_0x2fe959;console[_0x813829(0x1e8)](_0x5932c3);});}),$(_0x1bcf41(0x180))['on'](_0x1bcf41(0x188),function(_0x2efe0a){const _0x416154=_0x1bcf41;if($(_0x416154(0x152))['is']($(this))){context['tool']='cursor';if(!context[_0x416154(0x196)]['length']){clear_all(),$(this)[_0x416154(0x14b)]('active');return;}clean_creation(context),pthis[_0x416154(0x145)][_0x416154(0x1ce)](),$(this)['removeClass'](_0x416154(0x1ed));return;}$(_0x416154(0x152))[_0x416154(0x14b)]('active'),$(this)[_0x416154(0x187)]('active'),context[_0x416154(0x1f5)]=_0x416154(0x1b8),on_set_tool();}),$('.fill_item[data-template=\x221\x22]')['on'](_0x1bcf41(0x188),function(_0x5343cb){const _0x131b46=_0x1bcf41;prepareCreateRoom(_0x131b46(0x1f1));}),$(_0x1bcf41(0x154))['on']('click',function(_0x71537e){const _0x12c79f=_0x1bcf41;prepareCreateRoom(_0x12c79f(0x194));}),$(_0x1bcf41(0x15d))['on'](_0x1bcf41(0x188),function(_0x2caba0){const _0x7b22e4=_0x1bcf41;let _0x5db15b=$(this)['data'](_0x7b22e4(0x1e1));getJSONData('./files/presets/templateRoom'+_0x5db15b+'.json')['then'](_0x16ceaf=>{canCreateRoom=!![],constractRoom(_0x16ceaf),build_segments();});}),$(_0x1bcf41(0x1be))['on'](_0x1bcf41(0x188),function(_0x43c0e2){const _0x5deec7=_0x1bcf41;setScale(context[_0x5deec7(0x1f4)]+scaleZoom);}),$(_0x1bcf41(0x1ae))['on'](_0x1bcf41(0x188),function(_0x1e088d){const _0x4727bf=_0x1bcf41;setScale(context[_0x4727bf(0x1f4)]-scaleZoom);}),$(_0x1bcf41(0x15f))['on'](_0x1bcf41(0x188),function(_0x4a10c6){const _0xb75c31=_0x1bcf41;if($(_0xb75c31(0x13f))['is']($(this)))return;$(_0xb75c31(0x172))[_0xb75c31(0x162)](0x1f4),$('.fill_type_item.active')[_0xb75c31(0x14b)](_0xb75c31(0x1ed)),$(this)[_0xb75c31(0x157)](_0xb75c31(0x15e))[_0xb75c31(0x162)](0x1f4),$(this)[_0xb75c31(0x187)](_0xb75c31(0x1ed));}),$(_0x1bcf41(0x1da))['on'](_0x1bcf41(0x188),function(_0x19bdbf){const _0x5415ff=_0x1bcf41;context[_0x5415ff(0x1f5)]=_0x19bdbf[_0x5415ff(0x17f)]['id'],on_set_tool();}),$('#save_project')['on'](_0x1bcf41(0x188),function(_0x52064d){const _0x486f9e=_0x1bcf41;$('.save_variants_block')[_0x486f9e(0x165)](_0x486f9e(0x1ed));});});export function setActionPanelEvents(){const _0x519ae3=_0x3417c1;let _0x3c78c3=canvas['getActiveObject']();$(_0x519ae3(0x185))[_0x519ae3(0x187)](_0x519ae3(0x1d5));if(_0x3c78c3[_0x519ae3(0x1a1)])return;let _0x5f00a7=$('.actions_panel\x20.length_input\x20input'),_0x5c86f8=$(_0x519ae3(0x1f7)),_0x36cdcc=$(_0x519ae3(0x184)),_0x2c99c6=$(_0x519ae3(0x197)),_0x29f642=$(_0x519ae3(0x1f2)),_0x20d584=$(_0x519ae3(0x1d3)),_0x2737d4=$('.actions_panel\x20.clear_transform'),_0x55590c=$('.actions_panel\x20.action#del'),_0x201d60=$(_0x519ae3(0x1c6));_0x5f00a7[_0x519ae3(0x191)](_0x519ae3(0x19a)),_0x5c86f8['off']('input'),_0x36cdcc['off'](_0x519ae3(0x19a)),_0x2c99c6[_0x519ae3(0x191)](_0x519ae3(0x188)),_0x29f642[_0x519ae3(0x191)](_0x519ae3(0x188)),_0x20d584[_0x519ae3(0x191)](_0x519ae3(0x188)),_0x201d60[_0x519ae3(0x191)](_0x519ae3(0x188)),_0x55590c['off'](_0x519ae3(0x188)),_0x2737d4['off'](_0x519ae3(0x188)),_0x55590c['on']('click',function(){const _0x2525e9=_0x519ae3;let _0x3f18c8=canvas['getActiveObject']();if(_0x3f18c8['isFurniture']){let _0x250905=findObj(context['contour'],_0x2525e9(0x1ed),!![]);removeItemByValue(_0x250905[_0x2525e9(0x140)][_0x2525e9(0x1ec)],_0x2525e9(0x1de),_0x3f18c8['uid']),canvas[_0x2525e9(0x16a)](_0x3f18c8),_0x3f18c8[_0x2525e9(0x192)](),pthis['canvas'][_0x2525e9(0x1ce)]();}}),_0x201d60['on'](_0x519ae3(0x188),function(){const _0x3c9681=_0x519ae3;if(!context)return;let {url:_0x141365}=get_furn_obj(context[_0x3c9681(0x1a7)],context[_0x3c9681(0x18d)]);fabric[_0x3c9681(0x19f)](_0x141365,function(_0x3b37d6,_0x453cda){const _0x41ef21=_0x3c9681;var _0x44daab=fabric[_0x41ef21(0x148)]['groupSVGElements'](_0x3b37d6,_0x453cda);_0x44daab['uid']=generateUniqueKey();let {poly:_0x4bebe2}=context[_0x41ef21(0x1c4)],_0x11f06d=_0x4bebe2['is_counterclockwise'](),_0x2ae7b3=_0x11f06d?_0x4bebe2[_0x41ef21(0x1f3)]:_0x4bebe2[_0x41ef21(0x156)],_0x4d0a32=_0x11f06d?_0x4bebe2['outer']:_0x4bebe2[_0x41ef21(0x156)];var _0x55e42c=Math['min'](..._0x2ae7b3[_0x41ef21(0x1ea)](_0x55001a=>_0x55001a['x'])),_0x2ec167=Math[_0x41ef21(0x1bd)](..._0x2ae7b3['map'](_0x21f91c=>_0x21f91c['x'])),_0x3cba07=Math[_0x41ef21(0x18c)](..._0x2ae7b3[_0x41ef21(0x1ea)](_0x1d6319=>_0x1d6319['y'])),_0x2c5497=Math[_0x41ef21(0x1bd)](..._0x2ae7b3[_0x41ef21(0x1ea)](_0x2ea675=>_0x2ea675['y'])),_0x2f5b49={'x':getRandomNumber(_0x55e42c,_0x2ec167),'y':getRandomNumber(_0x3cba07,_0x2c5497)};if(isPointInsidePolygon(_0x2f5b49['x'],_0x2f5b49['y'],_0x4d0a32)){_0x44daab[_0x41ef21(0x16d)]=_0x2f5b49['x'],_0x44daab['top']=_0x2f5b49['y'],_0x44daab['scaleX']=_0x3c78c3['scaleX'],_0x44daab[_0x41ef21(0x1ee)]=_0x3c78c3[_0x41ef21(0x1ee)],_0x44daab[_0x41ef21(0x146)]=_0x3c78c3['url'],_0x44daab[_0x41ef21(0x15a)]=_0x3c78c3['angle'],_0x44daab[_0x41ef21(0x1e6)]=_0x3c78c3[_0x41ef21(0x1ee)],_0x44daab['origScaleX']=_0x3c78c3['scaleX'],_0x44daab[_0x41ef21(0x153)]=_0x3c78c3[_0x41ef21(0x1ee)],_0x44daab['startScaleX']=_0x3c78c3[_0x41ef21(0x14e)];let _0x5a6d79=Math['ceil'](_0x44daab[_0x41ef21(0x144)]*_0x3c78c3[_0x41ef21(0x1e6)]),_0x15eeec=Math[_0x41ef21(0x1d1)](_0x44daab[_0x41ef21(0x1eb)]*_0x3c78c3[_0x41ef21(0x1ca)]);_0x44daab['origPosX']=_0x44daab[_0x41ef21(0x16d)],_0x44daab[_0x41ef21(0x142)]=_0x44daab[_0x41ef21(0x1cb)],_0x44daab['origHeight']=_0x5a6d79,_0x44daab[_0x41ef21(0x1d4)]=_0x15eeec,_0x44daab['startPosX']=_0x44daab['left'],_0x44daab['startPosY']=_0x44daab[_0x41ef21(0x1cb)],_0x44daab[_0x41ef21(0x160)]='center',_0x44daab[_0x41ef21(0x1c1)]=_0x41ef21(0x147),_0x3c78c3[_0x41ef21(0x1e9)]=![],context[_0x41ef21(0x1c4)][_0x41ef21(0x140)][_0x41ef21(0x1ec)][_0x41ef21(0x1d7)](_0x44daab),pthis['canvas'][_0x41ef21(0x1e3)](_0x44daab),_0x44daab['isFurniture']=!![],_0x44daab[_0x41ef21(0x1a1)]=![];}},function(_0x13f699,_0x21575a){const _0x30cc2e=_0x3c9681;_0x21575a[_0x30cc2e(0x198)]('id',_0x13f699[_0x30cc2e(0x19c)]('id'));});}),_0x5f00a7['on'](_0x519ae3(0x19a),function(){const _0x18283e=_0x519ae3;_0x3c78c3[_0x18283e(0x1ee)]=$(this)[_0x18283e(0x176)]()/_0x3c78c3['height'],obj[_0x18283e(0x1cd)]=$(this)[_0x18283e(0x176)](),pthis[_0x18283e(0x145)][_0x18283e(0x1ce)]();}),_0x5c86f8['on']('input',function(){const _0x2c3323=_0x519ae3;_0x3c78c3['scaleX']=$(this)[_0x2c3323(0x176)]()/_0x3c78c3[_0x2c3323(0x1eb)],obj[_0x2c3323(0x1d4)]=$(this)[_0x2c3323(0x176)](),pthis['canvas']['renderAll']();}),_0x36cdcc['on'](_0x519ae3(0x19a),function(){const _0x55461f=_0x519ae3;_0x3c78c3[_0x55461f(0x15a)]=+$(this)[_0x55461f(0x176)](),pthis[_0x55461f(0x145)]['renderAll']();}),_0x29f642['on'](_0x519ae3(0x188),function(){const _0x5072b1=_0x519ae3;_0x3c78c3[_0x5072b1(0x198)]({'scaleX':-_0x3c78c3[_0x5072b1(0x14e)]}),_0x3c78c3[_0x5072b1(0x149)]=!_0x3c78c3[_0x5072b1(0x149)],canvas['renderAll']();}),_0x2c99c6['on']('click',function(){const _0x472cb6=_0x519ae3;_0x3c78c3['set']({'scaleY':-_0x3c78c3[_0x472cb6(0x1ee)]}),_0x3c78c3[_0x472cb6(0x1b5)]=!_0x3c78c3[_0x472cb6(0x149)],canvas['renderAll']();}),_0x20d584['on'](_0x519ae3(0x188),function(){const _0x5c16d7=_0x519ae3;_0x3c78c3[_0x5c16d7(0x15a)]+=0x5a;let _0x7493ce=0x168-_0x3c78c3[_0x5c16d7(0x15a)];_0x7493ce<=0x0&&(_0x3c78c3[_0x5c16d7(0x15a)]=0x0,_0x3c78c3[_0x5c16d7(0x15a)]+=_0x7493ce),$(_0x5c16d7(0x18f))['val'](Math[_0x5c16d7(0x170)](_0x3c78c3[_0x5c16d7(0x15a)])),pthis[_0x5c16d7(0x145)][_0x5c16d7(0x1ce)]();}),_0x2737d4['on'](_0x519ae3(0x188),function(){const _0x384ccd=_0x519ae3;_0x3c78c3[_0x384ccd(0x15a)]=0x0,_0x3c78c3[_0x384ccd(0x149)]&&(_0x3c78c3[_0x384ccd(0x198)]({'scaleX':-_0x3c78c3['scaleX']}),_0x3c78c3[_0x384ccd(0x149)]=![]),_0x3c78c3['flipV']&&(_0x3c78c3[_0x384ccd(0x198)]({'scaleY':-_0x3c78c3[_0x384ccd(0x1ee)]}),_0x3c78c3[_0x384ccd(0x1b5)]=![]),_0x3c78c3[_0x384ccd(0x198)]({'scaleY':_0x3c78c3[_0x384ccd(0x153)],'scaleX':_0x3c78c3[_0x384ccd(0x1c9)],'left':_0x3c78c3[_0x384ccd(0x177)],'top':_0x3c78c3[_0x384ccd(0x142)]}),_0x3c78c3[_0x384ccd(0x164)](),$('input#h')['val'](Math[_0x384ccd(0x170)](_0x3c78c3['width'])),$(_0x384ccd(0x1af))[_0x384ccd(0x176)](Math['round'](_0x3c78c3[_0x384ccd(0x144)])),$(_0x384ccd(0x18f))['val'](Math['round'](_0x3c78c3['angle'])),canvas[_0x384ccd(0x1ce)]();}),_0x3c78c3[_0x519ae3(0x1ed)]=![],_0x3c78c3[_0x519ae3(0x1a1)]=!![],$('.actions_panel')[_0x519ae3(0x187)](_0x519ae3(0x1d5));}export function updateZoomUI(){const _0x30ce89=_0x3417c1;let _0xf81a23=0x0;$(_0x30ce89(0x1f6))[_0x30ce89(0x178)]()[_0x30ce89(0x1c3)](function(){const _0x11007b=_0x30ce89;_0xf81a23+0.45<context[_0x11007b(0x1f4)]?$(this)['addClass']('fill'):$(this)[_0x11007b(0x1bc)]('fill')&&$(this)[_0x11007b(0x14b)](_0x11007b(0x174)),_0xf81a23+=0.45;});}export function setScale(_0x84d54,_0x366cec){const _0x3aaeaa=_0x3417c1;let _0x3e2e13=context[_0x3aaeaa(0x1f4)];context[_0x3aaeaa(0x1f4)]=_0x84d54,context[_0x3aaeaa(0x1f4)]>MAX_SCALE&&(context[_0x3aaeaa(0x1f4)]=MAX_SCALE),context['zoom']<MIN_SCALE&&(context[_0x3aaeaa(0x1f4)]=MIN_SCALE),_0x366cec&&(context[_0x3aaeaa(0x1f5)]=_0x3aaeaa(0x14a),on_set_tool()),context[_0x3aaeaa(0x182)]['x']=0x0,context[_0x3aaeaa(0x182)]['y']=0x0,update_scale(),update_translation(),updateZoomUI(),pthis[_0x3aaeaa(0x145)][_0x3aaeaa(0x1ce)](),context[_0x3aaeaa(0x1f5)]=_0x3aaeaa(0x186);}function _0xbf36(){const _0x15ac08=['cursor','addClass','click','60SxFoOH','.active_item_icon\x20img','179696MHyHrN','min','furniture_type','doors','input#a','rect_w','off','dispose','discardActiveObject','#createRectRoom','./files/img/interface/door_preview.png','contour','.actions_panel\x20.flip#vertical','set','.close_modal\x20svg','input','.actions_panel\x20.action#del','getAttribute','dragover','dragstart','loadSVGFromURL','#cancel','eventsSet','log','prev','rectangleCorners','6680267TcijUK','endsWith','active_cat','dragend','LineMatch','toString','slice','toFixed','text','#zoom_out','input#w','Inactive','src','then','clientX','parentElement','flipV','rectDoor','28GrmFWu','wall','splice','data-furniture','windows','hasClass','max','#zoom_in','base','\x20#rect_h','originY','73981wCxAUd','each','current','forEach','.actions_panel\x20.action#copy','\x20м\x20','#rect_h','startScaleX','origScaleX','top','.sq_v','origHeight','renderAll','header','visible','ceil','area','.actions_panel\x20.flip#rotate','origWeight','show','.warning_block','push','./files/img/interface/window_preview.png','lineDoor','.variant_item','attr','772104zkQORL','data-contuer','uid','requestRenderAll','append','template','.fill_item\x20img[data-furniture]','add','line','2VSkNqI','origScaleY','one','error','hasControls','map','width','furnitures','active','scaleY','sort','rect','#createSqRoom','.actions_panel\x20.flip#horizontal','outer','zoom','tool','.zoom_scale','.actions_panel\x20.width_input\x20input','#warningModal','#rectangle','.createRectRoom_btn','catch','import','.fill_type_item.active','poly','clientY','origPosY','data-del-door','height','canvas','url','center','util','flipH','reset','removeClass','.canvas-container','.fill_item\x20img[data-contuer]','scaleX','<sup>2</sup>','.createRectRoom_btn#create','Line','.fill_item.active','startScaleY','.fill_item[data-template=\x222\x22]','disable','inner','find','.filling_content_panel','.rect_popup_inputs\x20input','angle','./files/presets/templateRoom1.json','window','.fill_item[data-template=\x224\x22],\x20.fill_item[data-template=\x226\x22]','.fill_content','.fill_type_item','originX','pin_y','slideToggle','arcticmodal','setCoords','toggleClass','data-type','55084EKhxLB','target','724797FlhoOv','remove','.save_variants_block','getActiveObject','left','pin_x','#new_project_modal','round','close','.fill_type_item.active\x20.fill_content','parent','fill','2386536hjVcaB','val','origPosX','children','next','20BMTGMX','#rect_w','points','length','data-del-window','currentTarget','[data-mode=\x22draw\x22]','ready','origin','door','.actions_panel\x20.angle_input\x20input','.actions_panel'];_0xbf36=function(){return _0x15ac08;};return _0xbf36();}function new_project(){const _0x53b06e=_0x3417c1;$('#startProjectWindow')[_0x53b06e(0x163)]({'midClick':!![],'closeOnEsc':!![],'closeOnOverlayClick':![],'closeOnBgClick':![],'afterOpen':function(){const _0x1fba23=_0x53b06e;context['zoom']=ZOOM_DEFAULT,updateZoomUI(),$('#rectangle')[_0x1fba23(0x191)]('click'),($(_0x1fba23(0x1f9))[_0x1fba23(0x1e7)](_0x1fba23(0x188),function(_0x471840){const _0x545737=_0x1fba23;$[_0x545737(0x163)]('close'),setTimeout(()=>{prepareCreateRoom('#createRectRoom');},0x64);}),$('#random')[_0x1fba23(0x191)]('click')),$('#random')['one'](_0x1fba23(0x188),function(_0x2ed546){const _0x245caa=_0x1fba23;context['tool']=_0x245caa(0x1b8),context[_0x245caa(0x1f4)]=ZOOM_DEFAULT,update_scale(),update_translation(),updateZoomUI(),on_set_tool(),$(_0x245caa(0x180))[_0x245caa(0x187)](_0x245caa(0x1ed)),$[_0x245caa(0x163)](_0x245caa(0x171));});}});}function prepareCreateRoom(_0x564c20){const _0x100c16=_0x3417c1;height_room=0x5,width_room=0x4;let _0x1df94a;$(_0x564c20+_0x100c16(0x1c0))['val'](height_room);_0x564c20==_0x100c16(0x194)&&($(_0x564c20+'\x20#rect_w')[_0x100c16(0x176)](width_room),_0x1df94a=$(_0x100c16(0x1c8))[_0x100c16(0x176)]()*$(_0x100c16(0x17b))[_0x100c16(0x176)]());_0x564c20==_0x100c16(0x1f1)&&(width_room=height_room,_0x1df94a=height_room*width_room);let _0x4146b5=0x2;!_0x1df94a[_0x100c16(0x1aa)]()[_0x100c16(0x1a6)]('00')&&(_0x4146b5=0x0),$('.sq_v')[_0x100c16(0x1ad)](_0x1df94a[_0x100c16(0x1ac)](_0x4146b5)+'\x20м')['append'](_0x100c16(0x14f)),$('.createRectRoom_btn')[_0x100c16(0x14b)](_0x100c16(0x155)),canCreateRoom=!![],$(_0x564c20)[_0x100c16(0x163)]({'midClick':!![],'closeOnEsc':!![],'closeOnOverlayClick':![],'closeOnBgClick':![],'afterOpen':function(){const _0x3585db=_0x100c16;$('.createRectRoom_btn#create')[_0x3585db(0x191)](_0x3585db(0x188)),$(_0x3585db(0x150))[_0x3585db(0x1e7)](_0x3585db(0x188),function(_0x578d70){const _0x18e95f=_0x3585db;getJSONData(_0x18e95f(0x15b))[_0x18e95f(0x1b2)](_0x6edbe6=>{const _0x4326e6=_0x18e95f;ZOOM_DEFAULT!=context[_0x4326e6(0x1f4)]&&(context['tool']=_0x4326e6(0x14a),on_set_tool()),constractRoom(_0x6edbe6),$[_0x4326e6(0x163)](_0x4326e6(0x171)),$(_0x4326e6(0x17b))['val'](''),$(_0x4326e6(0x1c8))[_0x4326e6(0x176)](''),$(_0x4326e6(0x1cc))[_0x4326e6(0x1ad)](0x0+_0x4326e6(0x1c7))[_0x4326e6(0x1e0)](_0x4326e6(0x14f));});});}});}function _0x49e6(_0x1fc4d5,_0x199ea8){const _0xbf3668=_0xbf36();return _0x49e6=function(_0x49e66b,_0x80626b){_0x49e66b=_0x49e66b-0x13f;let _0x38c8af=_0xbf3668[_0x49e66b];return _0x38c8af;},_0x49e6(_0x1fc4d5,_0x199ea8);}function constractRoom(_0x1ee8ab){const _0x5a82b2=_0x3417c1;if(!canCreateRoom)return;let _0x4ca6c7=0x2d2,_0x462381=0x186;if(width_room&&height_room){let _0x45c376=0.005,_0x43d38b=(height_room*context[_0x5a82b2(0x1f4)]+0.12)/_0x45c376,_0x34b881=(width_room*context['zoom']+0.12)/_0x45c376,_0x2e4bdc=getRectangleCorners(_0x4ca6c7,_0x462381,_0x43d38b,_0x34b881)['rectangleCorners'][_0x5a82b2(0x1ab)](0x0,-0x1),_0x34589d=getRectangleCorners(_0x4ca6c7,_0x462381,_0x43d38b-0x2*WALL_HALF_WIDTH,_0x34b881-0x2*WALL_HALF_WIDTH)[_0x5a82b2(0x1a4)],_0x525d43=getRectangleCorners(_0x4ca6c7,_0x462381,_0x43d38b+0x2*WALL_HALF_WIDTH,_0x34b881+0x2*WALL_HALF_WIDTH)[_0x5a82b2(0x1a4)];_0x1ee8ab[0x0]['base']=_0x2e4bdc,_0x1ee8ab[0x0][_0x5a82b2(0x156)]=_0x525d43,_0x1ee8ab[0x0][_0x5a82b2(0x1f3)]=_0x34589d;}canvas['requestRenderAll'](),createRoomFromJson(_0x1ee8ab[0x0]),height_room=0x0,width_room=0x0,setScale(getZoom(context[_0x5a82b2(0x1c4)][_0x5a82b2(0x140)][_0x5a82b2(0x1d2)]),!![]),canvas['requestRenderAll']();}export function show_points(){const _0x4a5b13=_0x3417c1;context['points']['forEach'](_0x511695=>pthis[_0x4a5b13(0x145)][_0x4a5b13(0x16a)](_0x511695)),context[_0x4a5b13(0x17c)]=[];if(context[_0x4a5b13(0x1c4)]){!context[_0x4a5b13(0x16e)]&&(context['pin_x']=make_static(new fabric[(_0x4a5b13(0x151))]([0x0,0x0,0x0,0x0],{'strokeDashArray':[0x5,0x5],'strokeWidth':0x2,'stroke':colors[_0x4a5b13(0x1a9)],'visible':![]}),!![]),pthis[_0x4a5b13(0x145)]['add'](context['pin_x']));!context['pin_y']&&(context[_0x4a5b13(0x161)]=make_static(new fabric[(_0x4a5b13(0x151))]([0x0,0x0,0x0,0x0],{'strokeDashArray':[0x5,0x5],'strokeWidth':0x2,'stroke':colors[_0x4a5b13(0x1a9)],'visible':![]}),!![]),pthis['canvas'][_0x4a5b13(0x1e3)](context['pin_y']));let _0x5761f7=context[_0x4a5b13(0x1c4)]['poly'][_0x4a5b13(0x1bf)];_0x5761f7['forEach'](_0x14f1d3=>{const _0x2de1ec=_0x4a5b13;clone_svg(SVG[_0x2de1ec(0x1b0)],_0x14f1d3['x'],_0x14f1d3['y']);});}}